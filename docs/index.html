<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>coda-packs-sdk</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<ul class="results-priority" style="display:none">
					</ul>
					<a href="index.html" class="title">coda-packs-sdk</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
			</ul>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-3 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/schema.html">schema</a>
					</li>
				</ul>
			</nav>
		</div>
		<div class="col-7 offset-3 col-content">
			<h1>Project coda-packs-sdk</h1>
			<div class="tsd-panel tsd-typography">
				<a href="#coda-packs-sdk" id="coda-packs-sdk" style="color: inherit; text-decoration: none;">
					<h1>Coda Packs SDK</h1>
				</a>
				<ul>
					<li><a href="#basic-concepts">Basic Concepts</a></li>
					<li><a href="#getting-started">Getting Started</a><ul>
							<li><a href="#prerequisites">Prerequisites</a></li>
							<li><a href="#one-time-setup">One-time Setup</a><ul>
									<li><a href="#global-install-quick">Global Install (Quick)</a></li>
									<li><a href="#single-project-install-recommended">Single-Project Install (Recommended)</a></li>
								</ul>
							</li>
							<li><a href="#setup-your-pack-definition">Setup Your Pack Definition</a></li>
						</ul>
					</li>
					<li><a href="#running-your-code">Running Your Code</a><ul>
							<li><a href="#running-formulas">Running Formulas</a></li>
							<li><a href="#running-syncs">Running Syncs</a></li>
							<li><a href="#fetching">Fetching</a></li>
						</ul>
					</li>
					<li><a href="#uploading-packs">Uploading Packs</a><ul>
							<li><a href="#registering-an-api-key">Registering an API Key</a></li>
							<li><a href="#creating-a-new-pack">Creating a New Pack</a></li>
							<li><a href="#uploading-a-pack-version">Uploading a Pack Version</a></li>
							<li><a href="#creating-a-release">Creating a Release</a></li>
						</ul>
					</li>
					<li><a href="#examples">Examples</a></li>
					<li><a href="#core-concepts">Core Concepts</a><ul>
							<li><a href="#fetching-remote-data">Fetching Remote Data</a></li>
							<li><a href="#authentication">Authentication</a><ul>
									<li><a href="#user-default-authentication-vs-system-authentication">User (Default) Authentication vs System Authentication</a></li>
									<li><a href="#security">Security</a></li>
									<li><a href="#authentication-types">Authentication Types</a></li>
								</ul>
							</li>
							<li><a href="#testing-authenticated-requests">Testing Authenticated Requests</a></li>
							<li><a href="#syncs">Syncs</a><ul>
									<li><a href="#continuation-examples">Continuation Examples</a></li>
									<li><a href="#dynamic-sync-tables">Dynamic Sync Tables</a><ul>
											<li><a href="#implementing-a-dynamic-sync-table">Implementing a Dynamic Sync Table</a></li>
										</ul>
									</li>
								</ul>
							</li>
							<li><a href="#normalization">Normalization</a></li>
							<li><a href="#type-hints">Type Hints</a></li>
							<li><a href="#key-mapping-and-extraneous-properties">Key Mapping and Extraneous Properties</a></li>
							<li><a href="#formula-namespaces">Formula Namespaces</a></li>
							<li><a href="#metadata-formulas">Metadata Formulas</a></li>
							<li><a href="#execution-environment">Execution Environment</a></li>
							<li><a href="#logging">Logging</a></li>
							<li><a href="#temporary-blob-storage">Temporary Blob Storage</a></li>
						</ul>
					</li>
					<li><a href="#testing-your-code">Testing Your Code</a><ul>
							<li><a href="#basic-formula-unittest">Basic Formula Unittest</a></li>
							<li><a href="#formula-unittest-with-mock-fetcher">Formula Unittest With Mock Fetcher</a></li>
							<li><a href="#sync-unittest">Sync Unittest</a></li>
							<li><a href="#integration-test">Integration Test</a></li>
							<li><a href="#return-value-validation">Return Value Validation</a></li>
						</ul>
					</li>
					<li><a href="#best-practices">Best Practices</a><ul>
							<li><a href="#file-structure">File Structure</a></li>
						</ul>
					</li>
					<li><a href="#assets">Assets</a></li>
					<li><a href="#reference">Reference</a></li>
				</ul>
				<a href="#basic-concepts" id="basic-concepts" style="color: inherit; text-decoration: none;">
					<h2>Basic Concepts</h2>
				</a>
				<p>Coda Packs allow you to extend the functionality of Coda with extensions that you write in JavaScript/TypeScript.
				These extensions can communicate with third-party APIs, with or without user authentication, if desired.</p>
				<p>Packs are a combination of <strong>formulas</strong>, <strong>sync tables</strong>, and <strong>column formats</strong>.</p>
				<p>A <strong>formula</strong> is a JavaScript function that will be exposed as a Coda formula, that you can use anywhere in a
					Coda doc that you can use any normal formula. Formulas take basic Coda types as input, like strings, numbers,
					dates, booleans, and arrays of these types, and return any of these types or objects whose properties are any
				of these types.</p>
				<p>A <strong>sync table</strong> is how to bring structured data from a third-party into Coda. A sync table is a table that
					you can add to a Coda doc that gets its rows from a third-party data source, that can be refreshed regularly
					to pull in new or updated data. A sync table is powered by a <strong>formula</strong> that takes parameters that represent
					sync options and returns an array of objects representing row data. A sync table also includes a <strong>schema</strong>
				describing the structure of the returned objects.</p>
				<p>A <strong>column format</strong> is a custom column type that you apply to any column in any Coda table. A column format
					tells Coda to interpret the value in a cell by executing a <strong>formula</strong> using that value, typically looking
					up data related to that value from a third-party API. For example, the Weather pack has a column format
					<code>Current Weather</code>; when applied to a column, if you type a city or address into a cell in that column,
					that location will be used an input to a formula that fetches the current weather at that location,
				and the resulting object with weather info will be shown in the cell.</p>
				<p>Your formulas, sync tables, and column formats are bundled together with metadata describing your pack,
				into a <code>PackDefinition</code> object which forms the complete specification of your pack.</p>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting Started</h2>
				</a>
				<a href="#prerequisites" id="prerequisites" style="color: inherit; text-decoration: none;">
					<h3>Prerequisites</h3>
				</a>
				<p>Make sure you have <strong>node</strong> and <strong>npm</strong> installed. We also recommend developing using TypeScript,
				in which case, make sure that you have TypeScript and <strong>ts-node</strong> installed.</p>
				<a href="#one-time-setup" id="one-time-setup" style="color: inherit; text-decoration: none;">
					<h3>One-time Setup</h3>
				</a>
				<a href="#global-install-quick" id="global-install-quick" style="color: inherit; text-decoration: none;">
					<h4>Global Install (Quick)</h4>
				</a>
				<p>The simplest way to get started with the SDK is to install it globally:</p>
				<pre><code class="language-bash"><span style="color: #000000">npm install --global git+ssh://github.com/coda/packs-sdk.git</span>
</code></pre>
				<a href="#single-project-install-recommended" id="single-project-install-recommended" style="color: inherit; text-decoration: none;">
					<h4>Single-Project Install (Recommended)</h4>
				</a>
				<p>It&#39;s easier to manage dependencies and avoid version conflicts across projects
					if you create an npm project for your pack and install the SDK and other dependencies
				locally.</p>
				<p>Create a new project directory if you haven&#39;t already and initialize your project:</p>
				<pre><code class="language-bash"><span style="color: #008000"># Initialize npm and follow prompts.</span>
<span style="color: #000000">npm init</span>
<span style="color: #008000"># Install the Coda Packs SDK locally in your project</span>
<span style="color: #000000">npm install --save git+ssh://github.com/coda/packs-sdk.git</span>
</code></pre>
				<p>Update your path so you can easily use the <code>coda</code> commandline (CLI) that ships with the SDK:</p>
				<pre><code class="language-bash"><span style="color: #008000"># Make sure to run this from the root directory of your project.</span>
<span style="color: #0000FF">export</span><span style="color: #000000"> PATH=</span><span style="color: #A31515">$(pwd)</span><span style="color: #000000">/node_modules/.bin:</span><span style="color: #001080">$PATH</span>
</code></pre>
				<p>(Globally-installed npm packages link CLI scripts into your system path. Locally installed packages
				live in <code>./node_modules/.bin</code> and so are more easily used by updating your path.)</p>
				<a href="#setup-your-pack-definition" id="setup-your-pack-definition" style="color: inherit; text-decoration: none;">
					<h3>Setup Your Pack Definition</h3>
				</a>
				<p>Run <code>coda init</code> to initialize an empty project with the recommended file structure
				and install the suggested npm dependencies.</p>
				<a href="#running-your-code" id="running-your-code" style="color: inherit; text-decoration: none;">
					<h2>Running Your Code</h2>
				</a>
				<p>Once published, your pack functionality will be executed on Coda servers after being invoked from a Coda doc.
					During the development process, you can call your formulas directly from the commandline, to simulate this
					process for rapid development. When you&#39;re nearing the end of authoring your pack, you can upload your pack
				to Coda and run it in a real doc to verify it works as intended.</p>
				<a href="#running-formulas" id="running-formulas" style="color: inherit; text-decoration: none;">
					<h3>Running Formulas</h3>
				</a>
				<p>The <code>coda</code> CLI utility helps you execute formulas, via the <code>coda execute</code> sub-command. You can run
				<code>coda execute --help</code> at any time to refresh yourself on usage. The syntax is:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute path/to/manifest.ts &lt;formula&gt; [params..]</span>
</code></pre>
				<p>So for example, if your pack definition was in <code>src/manifest.ts</code> and you wanted to call a function
				named <code>MyFormula</code> that takes one argument, you&#39;d run:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute src/manifest.ts MyFormula some-arg</span>
</code></pre>
				<p>This will execute the formula and print the output to the terminal. (A quick reminder, if your arguments
					have spaces or special characters in them, put them in quotation marks when specifying them on the
				commandline.)</p>
				<p>The <code>coda execute</code> utility will look at your pack definition to determine the types of your parameters
					and will interpret your arguments accordingly. For example, if your formula takes a string and you pass
					<code>123</code> as an argument on the commandline, it will know to interpret that as a string, but if your formula
				takes a number, it will interpret <code>123</code> as a number before executing the formula.</p>
				<p>To pass array parameters to <code>coda execute</code>, use a comma separated string. For example, [1,2,3] should be
				passed with this format:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute src/manifest.ts MyFormula </span><span style="color: #A31515">&quot;1,2,3&quot;</span>
</code></pre>
				<a href="#running-syncs" id="running-syncs" style="color: inherit; text-decoration: none;">
					<h3>Running Syncs</h3>
				</a>
				<p>The above example shows how to execute a regular pack <strong>formula</strong>. Executing a <strong>sync</strong> is almost
				identical:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute path/to/manifest.ts &lt;sync name&gt; [params..]</span>
</code></pre>
				<p>So for example, if you had a sync called <code>Items</code>, that took a start date as a parameter,
				you would execute this as:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute path/to/manifest.ts Items 2020-12-15</span>
</code></pre>
				<p>This will execute your sync formula repeatedly until there are no more results, and print
					the output array of all result objects to the terminal. See <a href="#syncs">Syncs</a> for more
				information about how and why sync formulas are invoked repeatedly for paginated results.</p>
				<p>If your sync table is a dynamic sync table with a variable source URL, use the <code>--dynamicUrl</code>
					parameter to specify which table your sync will use. This will likely be an API-specific URL,
				not a user-friendly URL that could be used in a browser.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute path/to/manifest Items --dynamicUrl=https://items.com/api/table</span>
</code></pre>
				<a href="#fetching" id="fetching" style="color: inherit; text-decoration: none;">
					<h3>Fetching</h3>
				</a>
				<p>By default, <code>coda execute</code> will use a mock fetcher for any http requests that your formulas make.
				If you wish to actually make http requests, use the <code>--fetch</code> flag, for example:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda execute --fetch src/manifest.ts MyFormula some-arg</span>
</code></pre>
				<p>Your http requests will commonly require authentication in order to succeed, which the <code>coda execute</code> utility supports.
				See the <a href="#authentication">Authentication</a> section about how to set this up.</p>
				<a href="#uploading-packs" id="uploading-packs" style="color: inherit; text-decoration: none;">
					<h2>Uploading Packs</h2>
				</a>
				<p><strong>NOTE: Pack uploads are currently unlaunched and are still in testing. The following commands will not work yet.</strong></p>
				<p>Note: if you are a beta tester using these commands with an alternative Coda environment,
					each of these commands accepts an optional <code>--codaApiEndpoint</code> where you must specify
				the url of that environment, e.g. <code>--codaApiEndpoint=https://&lt;env&gt;.coda.io</code></p>
				<a href="#registering-an-api-key" id="registering-an-api-key" style="color: inherit; text-decoration: none;">
					<h3>Registering an API Key</h3>
				</a>
				<p>All of the pack upload commands work with the Coda API to upload your pack, and hence
					require an API key to identify you as the user. Simply run this command, and you&#39;ll be
					given a link to the Coda Account page to create an API token, which you can then
					paste in the terminal. You API key will be saved in a hidden local file <code>.coda.json</code>
				in your current directory, to be used with future commands.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda register</span>
</code></pre>
				<a href="#creating-a-new-pack" id="creating-a-new-pack" style="color: inherit; text-decoration: none;">
					<h3>Creating a New Pack</h3>
				</a>
				<p>When you&#39;ve implemented your pack and are ready to upload it to Coda for the first time,
					you&#39;ll need to create new pack on Coda&#39;s servers to get assigned a pack id. Run this
				command just once for each pack you create:</p>
				<pre><code class="language-bash"><span style="color: #000000">coda create path/to/manifest.ts</span>
</code></pre>
				<p>This will create a new empty pack on Coda&#39;s servers. It will print out the url of the
					pack management page in the Coda UI, and store the newly-assigned pack id in a hidden file
					<code>.coda-pack.json</code> in the same directory as your manifest file. (This allows you to put
					multiple pack definitions in the same repo, as long as they&#39;re in <strong>different directories</strong>.)
				The id in this file will be used subsequent CLI commands for managing your pack.</p>
				<p>This command accepts optional flags for specifying a name and description for the pack.
				You can always set or update the name and description in the pack management UI later.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda create path/to/manifest.ts --name </span><span style="color: #A31515">&quot;My Pack&quot;</span><span style="color: #000000"> --description </span><span style="color: #A31515">&quot;My pack description.&quot;</span>
</code></pre>
				<a href="#uploading-a-pack-version" id="uploading-a-pack-version" style="color: inherit; text-decoration: none;">
					<h3>Uploading a Pack Version</h3>
				</a>
				<p>As you make changes to your pack, when you&#39;re ready to upload them to Coda so that
					you can try them in a real doc, use this command to upload a new version of your
				pack based on your latest code.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda upload path/to/manifest.ts</span>
</code></pre>
				<p>This will build and upload your compiled pack implementation. You must update the <code>version</code> in your manifest
				to be greater than your previous upload.</p>
				<p>Once uploaded, as an editor of the pack, you&#39;ll be able to install this specific version
					of your pack in any of your docs, without affecting the live release version of your pack
					that other users may be using, giving you an opportunity to test out your latest changes
				in your docs before making them live to users.</p>
				<p>This command accepts an optional flag where you can provide notes about the contents of the version, helping you track changes from version to version.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda upload path/to/manifest.ts --notes </span><span style="color: #A31515">&quot;Added the formula MyNewFormula.&quot;</span>
</code></pre>
				<p><strong>NOTE: At this time, this command will not upload your <em>source code</em>, only your compiled pack.</strong> You will not see your source code
				in the web editor as you would if you had used the web code editor to compose your pack.</p>
				<a href="#creating-a-release" id="creating-a-release" style="color: inherit; text-decoration: none;">
					<h3>Creating a Release</h3>
				</a>
				<p>When you&#39;ve tested a pack version and want to make that version live for users of your
					pack, create a release. The pack version that you release will become the version that
					is used by new installations of your pack, and existing installations will gradually
				be upgraded to this version.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda release path/to/manifest.ts &lt;optional-version&gt;</span>
</code></pre>
				<p>If you don&#39;t explicitly specify a version, the version specified in your manifest.ts
					file will be used. But you are free to specify another pack version here if you wish
				to release a specific version rather than the latest.</p>
				<p>The version must always be greater than that of any of your previous releases.</p>
				<p>Alternatively, you can easily create releases from the pack management UI.</p>
				<p>This command accepts an optional flag where you can provide notes about the contents of the release, helping you and users of your pack understand what changed from release to release.</p>
				<pre><code class="language-bash"><span style="color: #000000">coda release path/to/manifest.ts --notes </span><span style="color: #A31515">&quot;Added the formula MyNewFormula.&quot;</span>
</code></pre>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h2>Examples</h2>
				</a>
				<p>See our examples repo <a href="https://github.com/coda/packs-examples">https://github.com/coda/packs-examples</a> for several examples of complete
				pack definitions of various levels of complexity.</p>
				<a href="#core-concepts" id="core-concepts" style="color: inherit; text-decoration: none;">
					<h2>Core Concepts</h2>
				</a>
				<a href="#fetching-remote-data" id="fetching-remote-data" style="color: inherit; text-decoration: none;">
					<h3>Fetching Remote Data</h3>
				</a>
				<p>One of the main reason packs are useful is that they can fetch data from a remote server or API and return it Coda.
					The Coda Packs API permits you to make http requests to third-parties via the <code>Fetcher</code> objects. This is the <strong>only</strong>
				way to make http requests in a pack, direct use of a a different http client is not permitted.</p>
				<p>All pack formulas including sync formulas have a <code>Context</code> object as their 2nd parameter. This context contains
					a property called <code>fetcher</code> that is a <code>Fetcher</code> object, exposing a single method, <code>fetch</code>. This method allows
				you to specify common information for an http request, including the http method, url, headers, and body:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">response</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #795E26">fetch</span><span style="color: #000000">({</span><span style="color: #001080">method:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;GET&#039;</span><span style="color: #000000">, </span><span style="color: #001080">url:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;https://myservice.com/api&#039;</span><span style="color: #000000">});</span>
</code></pre>
				<p>The response object contains the http status code, response body, and response headers, as you&#39;d expect.</p>
				<p>The fetcher will apply authentication information to each request before it is sent, if you have configured
					authentication for your pack. You do not, should not, and likely cannot apply authentication headers or
				url parameters directly to a fetcher request; Coda will do this for you.</p>
				<p>The fetcher may also apply rate limits, to ensure that a given pack is not sending too many requests in a
				short period of time, which may affect the service you are fetching from.</p>
				<a href="#authentication" id="authentication" style="color: inherit; text-decoration: none;">
					<h3>Authentication</h3>
				</a>
				<p>Packs that use third-party APIs and particularly those that fetch user-specific data will almost
					always require authentication. The SDK supports many kinds of authentication, you simply declare
					what kind of authentication your pack uses and some configuration data in your pack definition,
					and Coda will facilitate getting authentication information from the user when they use your pack,
					and the necessary authentication data will be applied to each fetcher request that you make from
				your pack code.</p>
				<a href="#user-default-authentication-vs-system-authentication" id="user-default-authentication-vs-system-authentication" style="color: inherit; text-decoration: none;">
					<h4>User (Default) Authentication vs System Authentication</h4>
				</a>
				<p>The SDK broadly divides authentication into two categories: authentication that is tied to
					the user of the pack vs authentication that is managed by the system, aka the pack author.
					In the pack definition the former is known as <code>defaultAuthentication</code> and the latter
					<code>systemConnectionAuthentication</code>. You will typically specify one or the other in your pack definition,
				or neither if your pack does not make http requests or those requests do not require authentication.</p>
				<p>Default authentication is the most common. Specify this if each user of your pack
					should log in with OAuth, or have their own API key, or whatever user-specific token
				is necessary for the pack to be able to retrieve data that is specific to that user.</p>
				<p>Use system authentication if you as the pack author will provide the necessary tokens
					to successfully make http requests within your pack. An example would be if your pack returns
					weather forecasts and the API involved requires an API key, but individual users need
					not provide their own API key. You as the pack author will register an API key and provide
				it to Coda, and Coda will apply it to all pack requests regardless of the user.</p>
				<a href="#security" id="security" style="color: inherit; text-decoration: none;">
					<h4>Security</h4>
				</a>
				<p>The SDK applies authentication info to fetcher requests automatically so you as the pack
					author don&#39;t need to worry about doing so and about how to do so, making authoring packs
					easier. But critically the SDK does this in a way so that packs code never has access
					to any authentication information at all, so that users and pack authors are protected
				from inadvertent or intentional mishandling of credentials.</p>
				<p>Your packs code will invoke <code>context.fetcher.fetch()</code> without any authentication info;
					in the process of executing the fetch request, Coda will automatically append credentials
					to the headers or url of the request, as appropriate, and then fulfill the request.
				Packs code will never have access to the request after authentication credentials have been applied.</p>
				<a href="#authentication-types" id="authentication-types" style="color: inherit; text-decoration: none;">
					<h4>Authentication Types</h4>
				</a>
				<ul>
					<li><strong>OAuth2</strong>: The user will be prompted to go through an OAuth2 authentication flow in
						the browser with a third-party service. The access token that the third-party service
						provides to Coda at the end of this flow will be applied to each fetcher request
						in the <code>Authorization</code> header, in the form <code>Authorization: Bearer &lt;access-token&gt;</code>.
						A custom token prefix other than <code>Bearer</code> may be provided by the pack author if necessary.
						The pack author provides OAuth2 configuration information including the third-party urls
						to use for the token creation flow and token exchange, the scopes needed by the pack.
						The pack author must also provide a client id and client secret for the third-party service,
						which are typically obtained when registering a new application in the third-party
					service&#39;s developer portal.</li>
					<li><strong>HeaderBearerToken</strong>: The user (or pack author, if using system authentication) provides an API token
						which is applied to the <code>Authorization</code> header of each fetcher request, in the form
					<code>Authorization: Bearer &lt;token&gt;</code>.</li>
					<li><strong>CustomHeaderToken</strong>: The user (or pack author, if using system authentication) provides an API token,
						which is applied to a custom API header as specified by the pack author, in the form
					<code>&lt;custom-header&gt;: &lt;custom-prefix&gt; &lt;token&gt;</code>.</li>
					<li><strong>QueryParamToken</strong>: The user (or pack author, if using system authentication) provides an API token,
						which is applied to the url of each fetcher request in a url parameter specified by the pack author.
					Using url params for authentication is not recommended if there are other alternatives.</li>
					<li><strong>MultiQueryParamToken</strong>: The user (or pack author, if using system authentication) provides
						multiple tokens, which are applied to the url of each fetcher request in url parameters specified
						by the pack author. This is not common. Using url params for authentication is not recommended
					if there are other alternatives.</li>
					<li><strong>WebBasic</strong>: The user (or pack author, if using system authentication) provides a username and
						typically a password, which are base64-encoded and applied to the <code>Authorization</code> header of each
						fetcher request, in the form <code>Authorization: Basic &lt;base64encode(username:password)&gt;</code>, as outlined in
						<a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic access authentication</a>.
						Web basic authentication sends passwords in cleartext so is not recommended if there are
					alternatives.</li>
					<li><strong>CodaApiHeaderBearerToken</strong>: Internally the same as <code>HeaderBearerToken</code> but for cases
						where a pack is going to make requests to Coda&#39;s own API. The UI will assist the user
						in creating and configuring an API token without the user needing to do this manually.
					This is mostly for use by Coda-internal packs.</li>
					<li><strong>Various</strong>: Indicates that the pack has various different authentication methods. When
						this is indicated, the user will be able to specify what type of authentication to use
					when they create a connection. This is mostly for use by Coda-internal packs.</li>
				</ul>
				<p><code>OAuth2</code>, <code>CodaApiHeaderBearerToken</code>, and <code>Various</code> are not available for system authentication.</p>
				<a href="#testing-authenticated-requests" id="testing-authenticated-requests" style="color: inherit; text-decoration: none;">
					<h3>Testing Authenticated Requests</h3>
				</a>
				<p>The SDK will help you set up authentication in your development environment so that you can
					execute pack formulas with authentication applied to them, allowing you to run your code
				end-to-end including making fetcher requests to third-party services.</p>
				<p>The <code>coda auth</code> utility is used to set up authentication for a pack. Run <code>coda auth --help</code> at
				any time for a refresher on how to use the utility. Mostly, it&#39;s as simple as running</p>
				<pre><code class="language-bash"><span style="color: #000000">coda auth path/to/manifest.ts</span>
</code></pre>
				<p>The utility will inspect your pack definition to see what kind of authentication you
					have defined, and then it will prompt you to provide in the console the necessary
					token(s) or other parameters required by your authorization type.
					If you are using <code>OAuth2</code>, after you provide the necessary configuration info,
				it will launch an OAuth flow in your browser.</p>
				<p>The credentials you provide will be stored in a file <code>.coda-credentials.json</code>
					in the same directory as your manifest.(If you move your manifest file, you&#39;ll want
					to move the credentials file along with it!)
					When you execute a pack formula using <code>coda execute --fetch path/to/manifest.ts ...</code>, the credentials
				in this file will be applied to your fetcher requests automatically.</p>
				<p>Similarly, if you are writing an integration test for your pack,
					you can pass <code>useRealFetcher: true</code> and <code>manifestDir: &#39;&lt;manifest-dir&gt;&#39;</code> in the <code>ContextOptions</code> argument
					when calling <code>executeFormulaFromPackDef()</code> or <code>executeSyncFormulaFromPackDef()</code>,
					and a real (non-mock) http fetcher will be used, and any credentials that you
					have registered will be applied to those requests automatically.
					The <code>manifestDir</code> option is required if your integration test requires authentication so that
					the SDK knows where to find the credentials file for this pack; normally you can just pass
					<code>manifestPath: require.resolve(&#39;../manifest&#39;)</code>, where you can replace <code>&#39;../manifest&#39;</code> with whatever
				the relative import path from your test to your manifest is.</p>
				<a href="#syncs" id="syncs" style="color: inherit; text-decoration: none;">
					<h3>Syncs</h3>
				</a>
				<p>A sync is a specific kind of <strong>formula</strong>, with the goal of populating a Coda table with data from a
					third-party data source. A sync formula returns an array of objects, with each object representing
				a row of data in the resulting table.</p>
				<p>Syncs assume that pagination will be necessary in most cases. One invocation of a sync formula
					is not meant to return all of the applicable results, but only one <strong>page</strong> of results of a reasonable
					size. For example, if you are fetching items from an API that returns 100 items per API request,
				it would be very reasonable for your sync formula to return 100 results per invocation.</p>
				<p>The 2nd parameter to a sync formula is a <code>SyncContext</code>, which has all the fields of the <code>Context</code> object
					used with regular formulas, but also includes a property called <code>sync</code>, which is a <code>Sync</code> object
					containing a property called <code>continuation</code>. A <code>Continuation</code> is a simple representation that you define
					of where you are in the overall sync process. Conceptually, the continuation is just a page number,
				but it can represent more if you need it.</p>
				<p>The first time your sync formula is invoked, the continuation will be undefined. Your formula then
					returns its array of results for that invocation, and optionally a continuation to use the next time
					the sync formula is invoked. If a continuation is not returned, the sync terminates. If a continuation is
					returned, that same continuation is passed as an input in <code>context.sync.continuation</code> the next time
					the formula is invoked. The formula is invoked repeatedly with each subsequent continuation until
				no continuation is returned.</p>
				<p>A <code>Continuation</code> is just a JavaScript object mapping one or more arbitrary key names to a string or number.
					It&#39;s up to you what you want to include to help you keep track of where you are in the overall sync.
				Typically, if you&#39;re calling an API, the continuation closely matches what the API uses for pagination.</p>
				<p>Suppose the API you&#39;re using allows you to pass a page number in a url parameter to filter results just
					to that page. You could return <code>{page: 2}</code> as your continuation. You could then look at
					<code>context.sync.continuation.page</code> in your sync formula to determine which page of results you
				should request in that particular invocation.</p>
				<p>If the API you&#39;re using instead returns a complete, opaque url of the next page of results in
					response metadata, you might structure your continuation like
				<code>{nextUrl: &#39;https://myapi.com/results?pageToken=asdf123&#39;}</code>.</p>
				<a href="#continuation-examples" id="continuation-examples" style="color: inherit; text-decoration: none;">
					<h4>Continuation Examples</h4>
				</a>
				<p>If your sync formula returns:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">result:</span><span style="color: #000000"> [...</span><span style="color: #001080">one</span><span style="color: #000000"> </span><span style="color: #001080">page</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">results</span><span style="color: #000000">...],</span>
<span style="color: #000000">  </span><span style="color: #001080">continuation:</span><span style="color: #000000"> {</span><span style="color: #001080">page:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">},</span>
<span style="color: #000000">};</span>
</code></pre>
				<p>Your formula will be called again immediately with <code>{page: 2}</code> as the value of <code>context.sync.continuation</code>.</p>
				<p>If your sync formula returns:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">result:</span><span style="color: #000000"> [...</span><span style="color: #001080">last</span><span style="color: #000000"> </span><span style="color: #001080">page</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">results</span><span style="color: #000000">...],</span>
<span style="color: #000000">};</span>

<span style="color: #008000">// or</span>

<span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">result:</span><span style="color: #000000"> [...</span><span style="color: #001080">last</span><span style="color: #000000"> </span><span style="color: #001080">page</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">results</span><span style="color: #000000">...],</span>
<span style="color: #000000">  </span><span style="color: #001080">continuation:</span><span style="color: #000000"> </span><span style="color: #0000FF">undefined</span><span style="color: #000000">,</span>
<span style="color: #000000">};</span>
</code></pre>
				<p>your sync will be assumed to be complete and your formula will not be invoked any further.</p>
				<p>The arrays of partial results from each sync formula invocation will be merged together and inserted into the doc.</p>
				<a href="#dynamic-sync-tables" id="dynamic-sync-tables" style="color: inherit; text-decoration: none;">
					<h4>Dynamic Sync Tables</h4>
				</a>
				<p>Most sync tables have schemas that can be statically defined. For example, if you&#39;re writing
					a sync of a user&#39;s Google Calendar events, the structure of an Event from the Google Calendar
				API is well-known and you can write a schema for what your table should contain.</p>
				<p>In certain cases, you may want to sync data whose structure is not known in advance
					and may depend on the user doing the sync. For example, Coda&#39;s Jira pack allows users
					to sync data from their Jira instance, but Jira lets users create arbitrary custom fields
					for their Issue objects. So the schema of the Issues sync table is not known in advance;
				it depends on the Jira account that the user is syncing from.</p>
				<p>Coda supports &quot;dynamic&quot; sync tables for cases like these. Instead of including a static
					schema in your sync table definition, you include a formula that returns a schema.
					This formula can use the fetcher to make authenticated http requests to your pack&#39;s API
					so that you may retrieve any necessary info from that third-party service needed
				to construct an appropriate schema.</p>
				<p>To define a dynamic schema, use the <code>makeDynamicSyncTable()</code> wrapper function.
					You will provide a <code>getSchema</code> formula that returns a schema definition. You&#39;ll
					also provide some supporting formulas like <code>getName</code>, to return a name in the UI
				for the table, in case even the name of the entities being synced is dynamic.</p>
				<p>There are two subtle variants of dynamic sync tables. A sync table can be dynamic simply
					because the shape of the entities being synced vary based on who the current user is.
					For example, in the Jira example, Jira Issues are synced by hitting the same static
					Jira API url for Issues, but the schema of the issues returned will be different
				depending on the configuration of the Jira instance of the calling user.</p>
				<p>Alternatively, a sync table can be dynamic because the data source is specific
					to each instance of the table. If you were building a sync table to sync data
					from a Google Sheet, the data source would be the API url of a specific sheet.
					In this case, the sync table will be bound to a <code>dynamicUrl</code> that defines the data
					source. This url will be available to all of the formulas to implement the sync table
					in the sync context, as <code>context.sync.dynamicUrl</code>. To create a sync table that uses
					dynamic urls, you must implement the <code>listDynamicUrls</code> metadata formula in your
				dynamic sync table definition, as described below.</p>
				<a href="#implementing-a-dynamic-sync-table" id="implementing-a-dynamic-sync-table" style="color: inherit; text-decoration: none;">
					<h5>Implementing a Dynamic Sync Table</h5>
				</a>
				<p>Use the <code>makeDynamicSyncTable()</code> wrapper function. It takes an object with the following fields:</p>
				<ul>
					<li><p><strong>name</strong>: The name for this category of sync table. The actual name of the table once added to a
							doc will be generated dynamically by your <code>getName</code> formula. This static name is just used when
							describing the contents of your pack. For example, if you had a dynamic sync table that syncs a sheet
							of data from a Google Sheets spreadsheet, the static name you specify here might be &quot;Sheet&quot;,
							indicating that this pack has a building block for syncing data from a sheet. You would implement
						your <code>getName</code> formula to return the actual name of the sheet, however.</p>
					</li>
					<li><p><strong>getName</strong>: A formula that returns a string, to be used as the title of the table when added to a doc.
							Typically this formula calls an API to get a name for the parent entity that you&#39;re syncing. In the
							Google Sheets example, this would call the Google Sheets API with the id of the sheet that you&#39;re syncing
							and return the name of that sheet. As with all metadata formulas, you will wrap your formula implementation
						with <code>makeMetadataFormula()</code>.</p>
					</li>
					<li><p><strong>getSchema</strong>: A formula that returns a schema object. Typically this formula calls an API to get info
							about the shape of the data you are syncing. In the Google Sheets example, this formula might fetch the
							first few rows of data, look at the first row of column headers to use as schema property names, and perhaps
							look at a few pieces of data in each row to try to sniff a value type for each column (string, number, date, etc).
							As with all metadata formulas, you will wrap your formula implementation with <code>makeMetadataFormula()</code>.
						The return value from this formula should always be an array schema:</p>
						<pre><code class="language-typescript"><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">makeSchema</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Array</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">items:</span><span style="color: #000000"> </span><span style="color: #795E26">makeObjectSchema</span><span style="color: #000000">({</span>
<span style="color: #000000">    </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Object</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #008000">// The property name from the `properties` object below that represents the unique</span>
<span style="color: #000000">    </span><span style="color: #008000">// identifier of this item. A sync table MUST have a stable unique identifier. Without</span>
<span style="color: #000000">    </span><span style="color: #008000">// one, each subsequent sync will wipe away all rows and recreate them from scratch.</span>
<span style="color: #000000">    </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;&lt;id property name&gt;&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #008000">// The property name from the `properties` object below that should label this item</span>
<span style="color: #000000">    </span><span style="color: #008000">// in the UI. All properties can be seen when hovering over a synced item in the UI,</span>
<span style="color: #000000">    </span><span style="color: #008000">// but the `primary` property value is shown on the chip representing the full object.</span>
<span style="color: #000000">    </span><span style="color: #001080">primary:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;&lt;display property name&gt;&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #008000">// Zero or more property names from the `properties` object below that should be created</span>
<span style="color: #000000">    </span><span style="color: #008000">// as projected columns by default the first time a user add this table to their doc.</span>
<span style="color: #000000">    </span><span style="color: #008000">// If your items have lots of properties, it may be overwhelming to create columns for all</span>
<span style="color: #000000">    </span><span style="color: #008000">// of them, so Coda will only automatically create columns for the featured properties</span>
<span style="color: #000000">    </span><span style="color: #008000">// specified here. A user can always reference non-featured properties in formulas or create</span>
<span style="color: #000000">    </span><span style="color: #008000">// new columns for those properties at any time.</span>
<span style="color: #000000">    </span><span style="color: #001080">featured:</span><span style="color: #000000"> [&lt;</span><span style="color: #001080">featured</span><span style="color: #000000"> </span><span style="color: #001080">property</span><span style="color: #000000"> </span><span style="color: #001080">names</span><span style="color: #000000">&gt;],</span>
<span style="color: #000000">    </span><span style="color: #008000">// An identifier for the synced items, primarily used as an implementation detail.</span>
<span style="color: #000000">    </span><span style="color: #001080">identity:</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #008000">// A label for the kind of entities that you are syncing. In the Google Sheets example</span>
<span style="color: #000000">      </span><span style="color: #008000">// you might use &quot;Row&quot; here, as each synced entity is a row from the source sheet.</span>
<span style="color: #000000">      </span><span style="color: #008000">// This label is used in a doc to identify the column in this table that contains the synced data.</span>
<span style="color: #000000">      </span><span style="color: #008000">// It must not contain any spaces or special characters.</span>
<span style="color: #000000">      </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;&lt;entity name&gt;&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #008000">// The dynamic url bound to this table instance, if any.</span>
<span style="color: #000000">      </span><span style="color: #001080">dynamicUrl:</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">sync</span><span style="color: #000000">.</span><span style="color: #001080">dynamicUrl</span><span style="color: #000000">,</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #008000">// The actual schema properties.</span>
<span style="color: #000000">    </span><span style="color: #001080">properties:</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">property1:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Number</span><span style="color: #000000">},</span>
<span style="color: #000000">      </span><span style="color: #001080">property2:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">},</span>
<span style="color: #000000">      ...</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">  }),</span>
<span style="color: #000000">});</span>
</code></pre>
					</li>
					<li><p><strong>getDisplayUrl</strong>: A metadata formula that returns a string, a user-friendly url representing the
							entity being synced. The table UI in the doc will provide a convenience link to this url so
							the user can easily click through to the source of data in that table.
							In the Google Sheets example, this could be the url to the web-editable spreadsheet document,
							(as opposed to the API url of the sheet). The <code>dynamicUrl</code> for a sync table is typically an API url
							for whatever service you&#39;re syncing from, which is not a meaningful url for an end user.
							Typically this formula returns a browser-friendly version
						of the dynamic url. As with all metadata formulas, you will wrap your formula implementation with <code>makeMetadataFormula()</code>.</p>
					</li>
					<li><p><strong>listDynamicUrls</strong>: (Optional) A metadata formula that returns an array of items of the form
							<code>{display: &#39;&lt;display label&gt;&#39;, value: &#39;&lt;dynamic url&gt;&#39;}</code>. If your table is in the category of those
							that require a dynamic url as described above, you must implement this method to list the
							dynamic urls available to the current user. The actual dynamic url is returned in the <code>value</code> property
							of each item in the returned array, but you must also specify a <code>display</code> string, which is the user-friendly
							name of the entity that will be displayed to the user in the UI in a list of syncable entities.
							In the Google Sheets example, this formula would return a list of the sheets that the user has access to;
							the <code>display</code> property would be the name of the sheet and the <code>value</code> property would be the
							Google Sheets API url for that sheet. As with all metadata formulas, you will wrap your formula
						implementation with <code>makeMetadataFormula()</code>.</p>
					</li>
					<li><p><strong>entityName</strong>: (Optional) A label for the kind of entities that you are syncing. In the Google Sheets example
							you might use &quot;Row&quot; here, as each synced entity is a row from the source sheet. This label is used in a doc to identify the column in this table that contains the synced data. If you don&#39;t provide an <code>entityName</code>, the value
						of <code>identity.name</code> from your schema will be used instead, so in most cases you don&#39;t need to provide this.</p>
					</li>
					<li><p><strong>formula</strong>: The definition of the formula that actually performs the sync. This formula definition has the
							same structure as a static (non-dynamic) sync table formula. The implementation of your formula,
							the function given as the <code>execute</code> property, has the same form has any other pack formula, taking
							two parameters, the first being the list of parameters given by the user, and the second being
							the execution context. As with a static sync table, the execution context has a <code>sync</code> property
							that provides sync-specific context, and in particular, if you are using a dynamic sync table with a
						<code>dynamicUrl</code> that url will be available to your implementation as <code>context.sync.dynamicUrl</code>.</p>
						<pre><code class="language-typescript"><span style="color: #000000">{</span>
<span style="color: #000000">  ...</span>
<span style="color: #000000">  execute: </span><span style="color: #0000FF">async</span><span style="color: #000000"> (</span><span style="color: #001080">params</span><span style="color: #000000">, </span><span style="color: #001080">context</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">request</span><span style="color: #000000"> = {</span>
<span style="color: #000000">      </span><span style="color: #001080">method:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;GET&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">dynamicUrl:</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">sync</span><span style="color: #000000">.</span><span style="color: #001080">dynamicUrl</span><span style="color: #000000">,</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">response</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #001080">request</span><span style="color: #000000">);</span>
<span style="color: #000000">    ...</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">}</span>
</code></pre>
					</li>
				</ul>
				<p>Each of the above metadata formulas (<code>getName/getDisplayUrl/getSchema/listDynamicUrls</code>) should be implemented
					with functions that take a single parameter, the execution context. The <code>dynamicUrl</code>, if used, is similarly
				provided via <code>context.sync.dynamicUrl</code>:</p>
				<pre><code class="language-typescript"><span style="color: #795E26">makeDynamicSyncTable</span><span style="color: #000000">({</span>
<span style="color: #000000">  ...</span>
<span style="color: #000000">  </span><span style="color: #001080">getName</span><span style="color: #000000">: </span><span style="color: #795E26">makeMetadataFormula</span><span style="color: #000000">(</span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">response</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">sync</span><span style="color: #000000">.</span><span style="color: #001080">dynamicUrl</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">body</span><span style="color: #000000">.</span><span style="color: #001080">entityName</span><span style="color: #000000">;</span>
<span style="color: #000000">  }),</span>
<span style="color: #000000">  ...</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#normalization" id="normalization" style="color: inherit; text-decoration: none;">
					<h3>Normalization</h3>
				</a>
				<p>Syncs and formulas that return objects get <strong>normalized</strong>, which simply means that their property names get
					rewritten to a standardized format. So long as you use the wrapper methods like <code>makeObjectFormula()</code> or
					<code>makeSyncTable()</code>, which we require as a best practice, this will happen automatically
					on your behalf so you don&#39;t need to worry about implementing normalization. However, it will affect
					the return values of object formulas and syncs so it&#39;s good to be aware of what&#39;s happening in order
				to understand the output when testing your formulas and avoid being surprised.</p>
				<p>There are a few reasons that object property names are normalized. One is to remove any punctuation from
					property names that would affect the Coda formula builder and cause a user to be unable to access
					a field in an object due to a bad name. Another reason is to standarize all property names across
					all the different packs which have different authors, so that working with pack values is consistent
				for Coda users.</p>
				<p>Normalization simply removes punctuation and rewrites strings into Pascal case. That is, property names
				like <code>fooBar</code>, <code>foo_bar</code>, and <code>foo bar</code> will all be normalized to <code>FooBar</code>.</p>
				<p>The SDK will normalize both the schema as well as the return values from object formulas. So for example, if you&#39;re working with an API that returns a User object that looks like <code>{id: &#39;...&#39;, name: &#39;...&#39;}</code>, you can define the schema for the object as</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">userSchema</span><span style="color: #000000"> = </span><span style="color: #795E26">makeObjectSchema</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Object</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;id&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">primary:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;name&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">properties:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">id:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">},</span>
<span style="color: #000000">    </span><span style="color: #001080">name:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">},</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">});</span>
</code></pre>
				<p>And your formula can return objects you get from the API that look like ``{id: &#39;...&#39;, name: &#39;...&#39;}` as-is. Coda will normalize the schema so that it looks like</p>
				<pre><code class="language-typescript"><span style="color: #000000">{</span>
<span style="color: #000000">  type: </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Object</span><span style="color: #000000">,</span>
<span style="color: #000000">  id: </span><span style="color: #A31515">&#039;Id&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  primary: </span><span style="color: #A31515">&#039;Name&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  properties: {</span>
<span style="color: #000000">    Id: {type: </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">, fromKey: </span><span style="color: #A31515">&#039;id&#039;</span><span style="color: #000000">},</span>
<span style="color: #000000">    Name: {type: </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">, fromKey: </span><span style="color: #A31515">&#039;name&#039;</span><span style="color: #000000">},</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>And it will convert your return value into <code>{Id: &#39;...&#39;, Name: &#39;...&#39;}</code> to match the schema.</p>
				<p>When testing your code using <code>coda execute</code> or the testing helpers provided by the SDK like
				<code>executeFormulaFromPackDef</code>, you&#39;ll notice that the return values are normalized as above.</p>
				<a href="#type-hints" id="type-hints" style="color: inherit; text-decoration: none;">
					<h3>Type Hints</h3>
				</a>
				<p>The SDK intentionally provides only a few value types for object properties to keep things
					simple, but the Coda application is able to understand many more types of values.
					The SDK allows you to optionally provide a <code>codaType</code> when declaring a property in an object
				schema which tells Coda how to interpret a value that is otherwise one of the basic value types.</p>
				<p>For example, suppose the API you&#39;re using provides a created-at timestamp as a numeric Unix time value.
					You can simply declare your field as <code>{type: ValueType.Number, codaType: ValueHintType.DateTime}</code> and
				Coda will parse the timestamp into a proper DateTime value on your behalf.</p>
				<p>Or perhaps you want to return an object that has an image associated with it, and your pack
					and the API it integrates with specify that image as a url. Your schema can declare that
					property as <code>{type: ValueType.String, codaType: ValueHintType.Image}</code> and that url will be
				downloaded to be hosted on Coda and presented as an image in the Coda UI.</p>
				<p>TODO: Link to full reference on hint types.</p>
				<a href="#key-mapping-and-extraneous-properties" id="key-mapping-and-extraneous-properties" style="color: inherit; text-decoration: none;">
					<h3>Key Mapping and Extraneous Properties</h3>
				</a>
				<p>The SDK assumes that it will be common to write packs that mostly fetch and return data from
					third-party API, and that massaging that data to conform to an SDK schema might be tedious,
				so the SDK supports ways to pass through third-party data as-is or with minimal massaging.</p>
				<p>The SDK will automatically remove properties that are not declared within the schema. So if
					your API returns properties not useful to the end user, you can just leave them out of the
				object scehma and they will be automatically elided.</p>
				<p>To make parsing an API object and massaging it to match your schema easier, you can use the
					<code>fromKey</code> property of a schema property definition. This instructs the SDK to convert
					properties with whatever name you specified in the <code>fromKey</code> property to the name that you
				gave to that property in the schema.</p>
				<p>So suppose that the API you&#39;re working with returns a User object that looks like
					<code>{userId: &#39;...&#39;, userName: &#39;...&#39;}</code> but you want your pack to return a value that has the
				friendlier property names <code>id</code> and <code>name</code>. You can define your schema as</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">userSchema</span><span style="color: #000000"> = </span><span style="color: #795E26">makeObjectSchema</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Object</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;id&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">primary:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;name&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">properties:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">id:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">, </span><span style="color: #001080">fromKey:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;userId&#039;</span><span style="color: #000000">},</span>
<span style="color: #000000">    </span><span style="color: #001080">name:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">, </span><span style="color: #001080">fromKey:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;userName&#039;</span><span style="color: #000000">},</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">});</span>
</code></pre>
				<p>You can then return the user object from the API as-is, and the <code>userId</code> and <code>userName</code> fields
				will be remapped to <code>id</code> and <code>name</code> (and then those fields will be normalized, too).</p>
				<p>With the use of the schema declaration (including <code>fromKey</code>), you generally can avoid writing
				any custom code to remove or remap fields to make an API object conform to your desired schema.</p>
				<a href="#formula-namespaces" id="formula-namespaces" style="color: inherit; text-decoration: none;">
					<h3>Formula Namespaces</h3>
				</a>
				<p>When defining the formulas included in your pack, you must place them in a <strong>namespace</strong>.
					When users invoke your formula in the Coda UI (or you invoke them when testing your pack)
				the formula will be prefixed by its namespace.</p>
				<p>The namespace exists so that formulas can be nicely grouped together by the pack they
					originated from, to make it easier to work with docs that have lots of formulas and
					avoid collisions when multiple unrelated packs may define formulas with the same name.
					Generally, the name of your namespace can just be the name of your pack (without any
				spaces or punctuation).</p>
				<p>So if you&#39;re writing a pack that integrates with Slack, you&#39;d probably want to choose <code>Slack</code>
					as your formula namespace. If you wrote a formula that sends a Slack message, you would
					invoke that formula in a doc using <code>Slack::SendMessage(...)</code>. When users are writing formulas in their
					docs, they can type <code>slack</code> and autocomplete will show them all of the formulas in the <code>Slack</code>
					namespace. If the user also used the Gmail pack and that pack also defined a <code>SendMessage</code>
					formula, it would be easy for the user to differentiate between the two because they
				have separate and clear namespaces: <code>Slack::SendMessage</code> vs <code>Gmail::SendMessage</code>.</p>
				<p>(You&#39;ll note that you needn&#39;t use a namespace with <code>coda execute</code> because the CLI can
				infer the namespace from the manifest file you specify in that command.)</p>
				<a href="#metadata-formulas" id="metadata-formulas" style="color: inherit; text-decoration: none;">
					<h3>Metadata Formulas</h3>
				</a>
				<p>While <strong>formulas</strong> and <strong>sync tables</strong> are the backbone of your pack, sometimes you will
				want or need to provide <strong>metadata formulas</strong> to help with the usability of your pack.</p>
				<p>For example, if your pack uses authentication, you should provide a <code>getConnectionName</code>
					metadata formula, which should return a user-friendly label for the credentials the user has
					provided. If the user provides your pack with an API key, you can implement a
					<code>getConnectionName</code> formula that hits your API&#39;s <code>/whoami</code> endpoint to get the name of
					the account that the API token belongs to and returns that name. Coda will display that
					name in the UI to help the user understand which underlying account(s) they&#39;re using with
				your pack.</p>
				<p>Another common use of metadata formulas is for <strong>parameter autocomplete</strong>. You may
					define a formula parameter that should only accept a specific set of enumerated values.
					Suppose that your formula accepts a <code>country</code> parameter that should only be one of the
					20 country codes that your API supports. You would probably want to include
					an <code>autocomplete</code> option in your parameter definition, which would be a metadata formula
					that returns those 20 valid values. The user would be able to select value from a dropdown
					instead of having to type a value directly. Your autocomplete formula can either return
					static values directly (in which chase the <code>makeSimpleAutocompleteMetadataFormula</code> helper
					should make this trivial to write) but it can also use the fetcher to request values
				from an API.</p>
				<p>A metadata formula is structurally similar to a regular pack formula, in that it is
				given an <code>ExecutionContext</code> and may make fetcher requests.</p>
				<p>For parameter autocomplete metadata formulas, a <code>search</code> string is passed, indicating a
					full or partial search query that the user has entered. An autocomplete formula will
					be passed a <code>formulaContext</code> argument, which consists of key-value pairs representing
					any other parameters the user has already selecting when configuring their formula or sync.
					For example, your formula may accept parameters for both a country and a state/province.
					The state/province options offered will depend on which country was selected, so your
					metadata formula invocation for the state/province parameter will want to look at the
				<code>formulaContext</code> to see which country has been selected.</p>
				<a href="#execution-environment" id="execution-environment" style="color: inherit; text-decoration: none;">
					<h3>Execution Environment</h3>
				</a>
				<p>Coda packs execute on the server side in a special isolated node environment. They do not execute in the browser
				and don&#39;t have access to any browser resources or user information other than what the packs infrastructure explicitly provides.</p>
				<a href="#logging" id="logging" style="color: inherit; text-decoration: none;">
					<h3>Logging</h3>
				</a>
				<p><code>ExecutionContext</code> provides a <code>Logger</code> interface that allows you to log messages
					that you can view in your Pack&#39;s development console. This can be useful for debugging during development
				as well as in production.</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;http://my/api&#039;</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">body</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000"> !== </span><span style="color: #098658">42</span><span style="color: #000000">) {</span>
<span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">warn</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Did not receive foo as expected, got %s&#039;</span><span style="color: #000000">, </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">body</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>The format of the <code>message</code> parameter to the <code>Logger</code> method is (documented here)[<a href="https://nodejs.org/api/util.html#util_util_format_format_args%5D">https://nodejs.org/api/util.html#util_util_format_format_args]</a>.</p>
				<a href="#temporary-blob-storage" id="temporary-blob-storage" style="color: inherit; text-decoration: none;">
					<h3>Temporary Blob Storage</h3>
				</a>
				<p>TODO: Write</p>
				<a href="#testing-your-code" id="testing-your-code" style="color: inherit; text-decoration: none;">
					<h2>Testing Your Code</h2>
				</a>
				<p>The SDK includes some utilities to help you write unittests and integration tests for your pack.
				These utilities include:</p>
				<ul>
					<li>Helper functions to execute a specific formula or sync from your pack definition.</li>
					<li>Mock fetchers (using <code>sinon</code>) to simulate http requests and responses.</li>
					<li>Validation of formula inputs and return values to help catch bugs both in your test code
					and your formula logic.</li>
					<li>Hooks to apply authentication to http requests for integration tests.</li>
				</ul>
				<p>You&#39;ll find testing and development utilities in <code>packs-sdk/dist/development</code>.</p>
				<p>The primary testing utilities are <code>executeFormulaFromPackDef</code> and <code>executeSyncFormulaFromPackDef</code>.
					You provide the name of a formula, a reference to your pack definition, and a parameter list,
					and the utility will execute the formula for you, validate the return value, and return it to you
					for further assertions. These utilities provide sane default execution contexts, and in the case of
					a sync, will execute your sync formula repeatedly for each page of results, simulating what a
				real Coda sync will do.</p>
				<p>By default, these utilities will use an execution environment that includes a mock fetcher
					that will not actually make http requests. You can pass your own mock fetcher if you wish
				to configure and inspect the mock requests.</p>
				<a href="#basic-formula-unittest" id="basic-formula-unittest" style="color: inherit; text-decoration: none;">
					<h3>Basic Formula Unittest</h3>
				</a>
				<p>Here&#39;s a very simple example test, using Mocha, for a formula that doesn&#39;t make any
				fetcher requests:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">executeFormulaFromPackDef</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">manifest</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;../manifest&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">describe</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Simple Formula&#039;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #795E26">it</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;executes a formula&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">async</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">executeFormulaFromPackDef</span><span style="color: #000000">(</span><span style="color: #001080">manifest</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;MyFormula&#039;</span><span style="color: #000000">, [</span><span style="color: #A31515">&#039;my-param&#039;</span><span style="color: #000000">]);</span>
<span style="color: #000000">    </span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #001080">result</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;my-return-value&#039;</span><span style="color: #000000">);</span>
<span style="color: #000000">  });</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#formula-unittest-with-mock-fetcher" id="formula-unittest-with-mock-fetcher" style="color: inherit; text-decoration: none;">
					<h3>Formula Unittest With Mock Fetcher</h3>
				</a>
				<p>A more interesting example is for a pack that does make some kind of http request using the fetcher.
					Here we set up a mock execution context, register a fake response on it, and pass our pre-configured
				mock fetcher when executing our formula.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">MockExecutionContext</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">executeFormulaFromPackDef</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">manifest</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;../manifest&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">newJsonFetchResponse</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">newMockExecutionContext</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">sinon</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;sinon&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">describe</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Formula with Fetcher&#039;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">MockExecutionContext</span><span style="color: #000000">;</span>

<span style="color: #000000">  </span><span style="color: #795E26">beforeEach</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">context</span><span style="color: #000000"> = </span><span style="color: #795E26">newMockExecutionContext</span><span style="color: #000000">();</span>
<span style="color: #000000">  });</span>

<span style="color: #000000">  </span><span style="color: #795E26">it</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;basic fetch&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">async</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">fakeResponse</span><span style="color: #000000"> = {</span>
<span style="color: #000000">      </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #098658">123</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Alice&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    };</span>
<span style="color: #000000">    </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #001080">fetch</span><span style="color: #000000">.</span><span style="color: #795E26">returns</span><span style="color: #000000">(</span><span style="color: #795E26">newJsonFetchResponse</span><span style="color: #000000">(</span><span style="color: #001080">fakeResponse</span><span style="color: #000000">));</span>

<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">executeFormulaFromPackDef</span><span style="color: #000000">(</span><span style="color: #001080">manifest</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;MyFormula&#039;</span><span style="color: #000000">, [</span><span style="color: #A31515">&#039;my-param&#039;</span><span style="color: #000000">], </span><span style="color: #001080">context</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;Alice&#039;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">sinon</span><span style="color: #000000">.</span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">calledOnce</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #001080">fetch</span><span style="color: #000000">);</span>
<span style="color: #000000">  });</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#sync-unittest" id="sync-unittest" style="color: inherit; text-decoration: none;">
					<h3>Sync Unittest</h3>
				</a>
				<p>Testing a sync is very similar to testing a regular formula. However, you want to create
					a <code>MockSyncExecutionContext</code> instead of a vanilla execution context, and you can test that
					your sync handles pagination properly by setting up mock fetcher responses that will result
				in your sync formula return a <code>Continuation</code> at least once.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">MockSyncExecutionContext</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">executeSyncFormulaFromPackDef</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">manifest</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;../manifest&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">newJsonFetchResponse</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">newMockSyncExecutionContext</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk/dist/development&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">sinon</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;sinon&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">describe</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Sync Formula&#039;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">syncContext</span><span style="color: #000000">: </span><span style="color: #267F99">MockSyncExecutionContext</span><span style="color: #000000">;</span>

<span style="color: #000000">  </span><span style="color: #795E26">beforeEach</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">syncContext</span><span style="color: #000000"> = </span><span style="color: #795E26">newMockSyncExecutionContext</span><span style="color: #000000">();</span>
<span style="color: #000000">  });</span>

<span style="color: #000000">  </span><span style="color: #795E26">it</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;sync with pagination&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">async</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">page1Response</span><span style="color: #000000"> = </span><span style="color: #795E26">newJsonFetchResponse</span><span style="color: #000000">({</span>
<span style="color: #000000">      </span><span style="color: #001080">users:</span><span style="color: #000000"> [{</span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Alice&#039;</span><span style="color: #000000">}],</span>
<span style="color: #000000">      </span><span style="color: #001080">nextPageNumber:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">page2Response</span><span style="color: #000000"> = </span><span style="color: #795E26">newJsonFetchResponse</span><span style="color: #000000">({</span>
<span style="color: #000000">      </span><span style="color: #001080">users:</span><span style="color: #000000"> [{</span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #098658">456</span><span style="color: #000000">, </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Bob&#039;</span><span style="color: #000000">}],</span>
<span style="color: #000000">      </span><span style="color: #001080">nextPageNumber:</span><span style="color: #000000"> </span><span style="color: #0000FF">undefined</span><span style="color: #000000">,</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span><span style="color: #001080">syncContext</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #001080">fetch</span>
<span style="color: #000000">      .</span><span style="color: #795E26">withArgs</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;/api/users&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">      .</span><span style="color: #795E26">returns</span><span style="color: #000000">(</span><span style="color: #001080">page1Response</span><span style="color: #000000">)</span>
<span style="color: #000000">      .</span><span style="color: #795E26">withArgs</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;/api/users?page=2&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">      .</span><span style="color: #795E26">returns</span><span style="color: #000000">(</span><span style="color: #001080">page2Response</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">executeSyncFormulaFromPackDef</span><span style="color: #000000">(</span><span style="color: #001080">manifest</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;MySync&#039;</span><span style="color: #000000">, [], </span><span style="color: #001080">syncContext</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #001080">result</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">Id</span><span style="color: #000000">, </span><span style="color: #098658">123</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #001080">result</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">Id</span><span style="color: #000000">, </span><span style="color: #098658">456</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">sinon</span><span style="color: #000000">.</span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">calledTwice</span><span style="color: #000000">(</span><span style="color: #001080">syncContext</span><span style="color: #000000">.</span><span style="color: #001080">fetcher</span><span style="color: #000000">.</span><span style="color: #001080">fetch</span><span style="color: #000000">);</span>
<span style="color: #000000">  });</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#integration-test" id="integration-test" style="color: inherit; text-decoration: none;">
					<h3>Integration Test</h3>
				</a>
				<p>If you wish to write an end-to-end integration test that actually hits the third-party API
					that you pack interacts with, you can simply pass <code>useRealFetcher: true</code> when using these
					test utilities. The execution context will include a fetcher that will make real http
					requests to whatever urls they are given, and will apply authentication to these requests
				if you have configured authentication locally using <code>coda auth</code>. For example:</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">executeFormulaFromPackDef</span><span style="color: #000000">(</span><span style="color: #001080">manifest</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;MyFormula&#039;</span><span style="color: #000000">, [</span><span style="color: #A31515">&#039;my-param&#039;</span><span style="color: #000000">], </span><span style="color: #0000FF">undefined</span><span style="color: #000000">, </span><span style="color: #0000FF">undefined</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">useRealFetcher:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#return-value-validation" id="return-value-validation" style="color: inherit; text-decoration: none;">
					<h3>Return Value Validation</h3>
				</a>
				<p>By default, these testing utility functions will validate return values after executing your pack
					functions. This validation checks that the values you actually return from your formula implementations
					match the schema you have written. This helps find bugs in your code and also helps catch subtle
					issues in how your values might be interpreted in the Coda application when you pack is executed
				for real.</p>
				<p>This validation can also help ensure that your test code correctly simulates responses from
					the API that you&#39;re integrating with. For instance, while developing our pack, you may have
					been regularly exercising your formula code by running <code>coda execute --fetch</code> frequently
					and you&#39;re confident that your code works correctly when run against the real API. Then you
					go to write unittests for you pack and you define some fake response objects, but you forget
					some required fields or you specified a field as an array when it should be a comma-separated list.
					If your fake response result in your pack returning a value that doesn&#39;t match the schema you,
				the validator will catch these and notify you and you can fix your test code.</p>
				<p>The validator will check for things like:</p>
				<ul>
					<li>Does the type of the return value match the type declared in the schema? For example, if you
					declared that your formula returns a number but it returns a string.</li>
					<li>If your formula returns an object (like all sync formulas), do all of the child properties
					in that object match the types declared in the schema?</li>
					<li>Are all properties that are declared as <code>required</code> in the schema present and non-empty?</li>
					<li>If the schema for a property declares a <code>codaType</code> type hint, can the value actually be
						interpreted as the hinted type? For example, if you declare a property as a string and give
						a hint type of <code>ValueType.DateTime</code>, the validator will try to parse the value as a datetime
					and give an error if that fails.</li>
				</ul>
				<p>The validator does not perfectly represent how Coda will process your return values
					at runtime but is intended to help catch the most common bugs so that you can fix them
				before uploading your pack to Coda.</p>
				<p>If desired, you can disable return value validation by passing <code>validateResult: false</code> in the
				<code>ExecuteOptions</code> argument of these testing utilities.</p>
				<a href="#best-practices" id="best-practices" style="color: inherit; text-decoration: none;">
					<h2>Best Practices</h2>
				</a>
				<p>You are free to structure your pack code however works best to you, but we have a few
				suggested best practices after having developed dozens of packs internally at Coda.</p>
				<a href="#file-structure" id="file-structure" style="color: inherit; text-decoration: none;">
					<h3>File Structure</h3>
				</a>
				<p>Your pack will likely grow over time and it can be easier to understand and maintain
					with a clear file structure. We recommend splitting out your manifest, your formulas,
				your schemas, and your types, each into separate files.</p>
				<p><strong>manifest.ts</strong></p>
				<p>This is the top-level definition of your pack. It&#39;s easiest to refer to if it&#39;s in
					file by itself containing nothing but the definition itself, importing the nuts
				and bolts of your pack from other files.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">PackDefinition</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">formulas</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;./formulas&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">syncTables</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;./formulas&#039;</span><span style="color: #000000">;</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">manifest</span><span style="color: #000000">: </span><span style="color: #267F99">PackDefinition</span><span style="color: #000000"> = {</span>
<span style="color: #000000">  </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;MyPack&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">description:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;My description&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">version:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;2.3.1&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">defaultAuthentication:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    ...</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  ...,</span>
<span style="color: #000000">  </span><span style="color: #001080">formulas</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">syncTables</span><span style="color: #000000">,</span>
<span style="color: #000000">};</span>
</code></pre>
				<p><strong>formulas.ts</strong></p>
				<p>Most of your pack implementation goes here.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> {</span><span style="color: #001080">Format</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> {</span><span style="color: #001080">SyncTable</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> {</span><span style="color: #001080">TypedStandardFormula</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk&#039;</span><span style="color: #000000">;</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">formulas</span><span style="color: #000000">: </span><span style="color: #267F99">TypedStandardFormula</span><span style="color: #000000">[] = [</span>
<span style="color: #000000">  </span><span style="color: #008000">// Formula defintions go here, e.g.</span>
<span style="color: #000000">  </span><span style="color: #008000">// makeStringFormula({ ... }),</span>
<span style="color: #000000">];</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">syncTables</span><span style="color: #000000">: </span><span style="color: #267F99">SyncTable</span><span style="color: #000000">[] = [</span>
<span style="color: #000000">  </span><span style="color: #008000">// Sync table definitions go here, e.g.</span>
<span style="color: #000000">  </span><span style="color: #008000">// makeSyncTable({...}),</span>
<span style="color: #000000">];</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">formats</span><span style="color: #000000">: </span><span style="color: #267F99">Format</span><span style="color: #000000">[] = [</span>
<span style="color: #000000">  </span><span style="color: #008000">// Column formats go here, e.g.</span>
<span style="color: #000000">  </span><span style="color: #008000">// {name: &#039;MyFormat&#039;, formulaNamespace: &#039;MyPack&#039;, formulaName: &#039;MyFormula&#039;}</span>
<span style="color: #000000">];</span>
</code></pre>
				<p><strong>schemas.ts</strong></p>
				<p>The schema definitions for your object formulas and sync tables go here.
					Your <code>formulas.ts</code> file will import those schemas. This creates a clear separation
					between schema and implementation and allows you to refer back to your schemas
				without wading through long formula implementations.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">ValueType</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk&#039;</span><span style="color: #000000">;</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080">makeObjectSchema</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;coda-packs-sdk&#039;</span><span style="color: #000000">;</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">personSchema</span><span style="color: #000000"> = </span><span style="color: #795E26">makeObjectSchema</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">Object</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;email&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">primary:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;name&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">properties:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">email:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">},</span>
<span style="color: #000000">    </span><span style="color: #001080">name:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">},</span>
<span style="color: #000000">    </span><span style="color: #001080">dateOfBirth:</span><span style="color: #000000"> {</span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #001080">ValueType</span><span style="color: #000000">.</span><span style="color: #001080">String</span><span style="color: #000000">, </span><span style="color: #001080">codaType:</span><span style="color: #000000"> </span><span style="color: #001080">ValueHintType</span><span style="color: #000000">.</span><span style="color: #001080">Date</span><span style="color: #000000">, </span><span style="color: #001080">fromKey:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;dob&#039;</span><span style="color: #000000">},</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">});</span>
</code></pre>
				<p><strong>types.ts</strong></p>
				<p>Types are optional (and only applicable if you&#39;re using TypeScript) but we find that they
					make packs code much more robust, understandable, and testable. Your types file
					can include types for both the request and response objects for the third-party API
					you may be working with, as well as for your own return values (which should match your schemas).
					If there is an existing library or SDK for the API you&#39;re working with, it may already have
				type definitions for API objects and you needn&#39;t write them yourself.</p>
				<p>If your pack has code to transform or massage and API response into a custom object
					structure that you&#39;ve defined, having types for both objects makes it very easy to
				see if you&#39;re correctly handled all fields.</p>
				<p>If you&#39;re writing tests that simulate API responses, having types for those API responses
				makes it trivial to construct fake responses that include the appropriate fields.</p>
				<pre><code class="language-typescript"><span style="color: #008000">/*</span>
<span style="color: #008000"> * Types for third-party API objects, if any, go here, e.g.</span>
<span style="color: #008000"> */</span>

<span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">FooAPIResponse</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">;</span>
<span style="color: #000000">  </span><span style="color: #001080">first_name</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">  </span><span style="color: #001080">last_name</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">  </span><span style="color: #001080">created_at</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">}</span>

<span style="color: #008000">/*</span>
<span style="color: #008000"> * Types for objects that your formulas return, if any, go here, e.g.</span>
<span style="color: #008000"> */</span>

<span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">MyFormulaResponse</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">;</span>
<span style="color: #000000">  </span><span style="color: #001080">fullName</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">  </span><span style="color: #001080">createdAt</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">}</span>
</code></pre>
				<a href="#assets" id="assets" style="color: inherit; text-decoration: none;">
					<h2>Assets</h2>
				</a>
				<p>Assets like your pack&#39;s logo should be uploaded via the Pack management UI.</p>
				<a href="#reference" id="reference" style="color: inherit; text-decoration: none;">
					<h2>Reference</h2>
				</a>
				<p>Run <code>make view-docs</code> to generate detailed reference documentation from the source code
				and open it in your browser.</p>
				<p>This will eventually be published on a documentation website.</p>
			</div>
			<!--{&quot;options&quot;:&quot;/Users/alanfang/code/packs-sdk&quot;,&quot;tsconfig&quot;:&quot;/Users/alanfang/code/packs-sdk&quot;,&quot;packages&quot;:[],&quot;entryPoints&quot;:[&quot;/Users/alanfang/code/packs-sdk/index.ts&quot;],&quot;exclude&quot;:[],&quot;externalPattern&quot;:[&quot;**/node_modules/**&quot;],&quot;excludeExternals&quot;:false,&quot;excludeNotDocumented&quot;:false,&quot;excludeInternal&quot;:false,&quot;excludePrivate&quot;:false,&quot;excludeProtected&quot;:false,&quot;disableSources&quot;:false,&quot;includes&quot;:&quot;&quot;,&quot;media&quot;:&quot;&quot;,&quot;watch&quot;:false,&quot;preserveWatchOutput&quot;:false,&quot;emit&quot;:false,&quot;out&quot;:&quot;&quot;,&quot;json&quot;:&quot;&quot;,&quot;pretty&quot;:true,&quot;theme&quot;:&quot;./node_modules/typedoc-neo-theme/bin/default&quot;,&quot;highlightTheme&quot;:&quot;light-plus&quot;,&quot;name&quot;:&quot;&quot;,&quot;includeVersion&quot;:false,&quot;excludeTags&quot;:[],&quot;readme&quot;:&quot;&quot;,&quot;defaultCategory&quot;:&quot;Other&quot;,&quot;categoryOrder&quot;:[],&quot;categorizeByGroup&quot;:true,&quot;sort&quot;:[&quot;kind&quot;,&quot;instance-first&quot;,&quot;alphabetical&quot;],&quot;gitRevision&quot;:&quot;&quot;,&quot;gitRemote&quot;:&quot;origin&quot;,&quot;gaID&quot;:&quot;&quot;,&quot;gaSite&quot;:&quot;auto&quot;,&quot;hideGenerator&quot;:false,&quot;toc&quot;:[],&quot;disableOutputCheck&quot;:false,&quot;help&quot;:false,&quot;version&quot;:false,&quot;showConfig&quot;:false,&quot;plugin&quot;:[&quot;typedoc-neo-theme&quot;],&quot;logger&quot;:&quot;console&quot;,&quot;logLevel&quot;:1,&quot;treatWarningsAsErrors&quot;:false,&quot;listInvalidSymbolLinks&quot;:false}-->
		</div>
		<div class="col-2 col-menu secondary-menu">
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum root">
						<a href="enums/authenticationtype.html" class="tsd-kind-icon">Authentication<wbr>Type</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/connectionrequirement.html" class="tsd-kind-icon">Connection<wbr>Requirement</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/defaultconnectiontype.html" class="tsd-kind-icon">Default<wbr>Connection<wbr>Type</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/featureset.html" class="tsd-kind-icon">Feature<wbr>Set</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/networkconnection.html" class="tsd-kind-icon">Network<wbr>Connection</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/packcategory.html" class="tsd-kind-icon">Pack<wbr>Category</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/postsetuptype.html" class="tsd-kind-icon">Post<wbr>Setup<wbr>Type</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/precanneddaterange.html" class="tsd-kind-icon">Precanned<wbr>Date<wbr>Range</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/quotalimittype.html" class="tsd-kind-icon">Quota<wbr>Limit<wbr>Type</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/syncinterval.html" class="tsd-kind-icon">Sync<wbr>Interval</a>
					</li>
					<li class=" tsd-kind-enum root">
						<a href="enums/type.html" class="tsd-kind-icon">Type</a>
					</li>
					<li class=" tsd-kind-class root">
						<a href="classes/statuscodeerror.html" class="tsd-kind-icon">Status<wbr>Code<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class root">
						<a href="classes/uservisibleerror.html" class="tsd-kind-icon">User<wbr>Visible<wbr>Error</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/arraytype.html" class="tsd-kind-icon">Array<wbr>Type</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/continuation.html" class="tsd-kind-icon">Continuation</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/dynamicsynctabledef.html" class="tsd-kind-icon">Dynamic<wbr>Sync<wbr>Table<wbr>Def</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/emptyformuladef.html" class="tsd-kind-icon">Empty<wbr>Formula<wbr>Def</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/executioncontext.html" class="tsd-kind-icon">Execution<wbr>Context</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/externalpackversionmetadata.html" class="tsd-kind-icon">External<wbr>Pack<wbr>Version<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/fetchrequest.html" class="tsd-kind-icon">Fetch<wbr>Request</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/fetchresponse.html" class="tsd-kind-icon">Fetch<wbr>Response</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/fetcher.html" class="tsd-kind-icon">Fetcher</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/format.html" class="tsd-kind-icon">Format</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/logger.html" class="tsd-kind-icon">Logger</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/metadataformulaobjectresulttype.html" class="tsd-kind-icon">Metadata<wbr>Formula<wbr>Object<wbr>Result<wbr>Type</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/network.html" class="tsd-kind-icon">Network</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/oauth2authentication.html" class="tsd-kind-icon">OAuth2<wbr>Authentication</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/packdefinition.html" class="tsd-kind-icon">Pack<wbr>Definition</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/packformatmetadata.html" class="tsd-kind-icon">Pack<wbr>Format<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/packformuladef.html" class="tsd-kind-icon">Pack<wbr>Formula<wbr>Def</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/packformulas.html" class="tsd-kind-icon">Pack<wbr>Formulas</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/packformulasmetadata.html" class="tsd-kind-icon">Pack<wbr>Formulas<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/packversiondefinition.html" class="tsd-kind-icon">Pack<wbr>Version<wbr>Definition</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/paramdef.html" class="tsd-kind-icon">Param<wbr>Def</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/quota.html" class="tsd-kind-icon">Quota</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/ratelimit.html" class="tsd-kind-icon">Rate<wbr>Limit</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/ratelimits.html" class="tsd-kind-icon">Rate<wbr>Limits</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/simpleautocompleteoption.html" class="tsd-kind-icon">Simple<wbr>Autocomplete<wbr>Option</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/syncexecutioncontext.html" class="tsd-kind-icon">Sync<wbr>Execution<wbr>Context</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/syncformularesult.html" class="tsd-kind-icon">Sync<wbr>Formula<wbr>Result</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/syncquota.html" class="tsd-kind-icon">Sync<wbr>Quota</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter root">
						<a href="interfaces/synctabledef.html" class="tsd-kind-icon">Sync<wbr>Table<wbr>Def</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/temporaryblobstorage.html" class="tsd-kind-icon">Temporary<wbr>Blob<wbr>Storage</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/variousauthentication.html" class="tsd-kind-icon">Various<wbr>Authentication</a>
					</li>
					<li class=" tsd-kind-interface root">
						<a href="interfaces/webbasicauthentication.html" class="tsd-kind-icon">Web<wbr>Basic<wbr>Authentication</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#authentication" class="tsd-kind-icon">Authentication</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#basicpackdefinition" class="tsd-kind-icon">Basic<wbr>Pack<wbr>Definition</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter root">
						<a href="modules.html#defaultvaluetype" class="tsd-kind-icon">Default<wbr>Value<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalobjectpackformula" class="tsd-kind-icon">External<wbr>Object<wbr>Pack<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalpackformat" class="tsd-kind-icon">External<wbr>Pack<wbr>Format</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalpackformatmetadata" class="tsd-kind-icon">External<wbr>Pack<wbr>Format<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalpackformula" class="tsd-kind-icon">External<wbr>Pack<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalpackformulas" class="tsd-kind-icon">External<wbr>Pack<wbr>Formulas</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalpackmetadata" class="tsd-kind-icon">External<wbr>Pack<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#externalsynctable" class="tsd-kind-icon">External<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#fetchmethodtype" class="tsd-kind-icon">Fetch<wbr>Method<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#genericdynamicsynctable" class="tsd-kind-icon">Generic<wbr>Dynamic<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#genericsyncformula" class="tsd-kind-icon">Generic<wbr>Sync<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#genericsyncformularesult" class="tsd-kind-icon">Generic<wbr>Sync<wbr>Formula<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#genericsynctable" class="tsd-kind-icon">Generic<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#loggerparamtype" class="tsd-kind-icon">Logger<wbr>Param<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#metadatacontext" class="tsd-kind-icon">Metadata<wbr>Context</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#metadataformula" class="tsd-kind-icon">Metadata<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#metadataformularesulttype" class="tsd-kind-icon">Metadata<wbr>Formula<wbr>Result<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packformulametadata" class="tsd-kind-icon">Pack<wbr>Formula<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packformularesult" class="tsd-kind-icon">Pack<wbr>Formula<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packformulavalue" class="tsd-kind-icon">Pack<wbr>Formula<wbr>Value</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packid" class="tsd-kind-icon">Pack<wbr>Id</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packmetadata" class="tsd-kind-icon">Pack<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packsynctable" class="tsd-kind-icon">Pack<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#packversionmetadata" class="tsd-kind-icon">Pack<wbr>Version<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#paramdefs" class="tsd-kind-icon">Param<wbr>Defs</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter root">
						<a href="modules.html#paramvalues" class="tsd-kind-icon">Param<wbr>Values</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#paramslist" class="tsd-kind-icon">Params<wbr>List</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#systemauthentication" class="tsd-kind-icon">System<wbr>Authentication</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#typedpackformula" class="tsd-kind-icon">Typed<wbr>Pack<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter root">
						<a href="modules.html#typedstandardformula" class="tsd-kind-icon">Typed<wbr>Standard<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-type-alias root">
						<a href="modules.html#varioussupportedauthentication" class="tsd-kind-icon">Various<wbr>Supported<wbr>Authentication</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#assertcondition" class="tsd-kind-icon">assert<wbr>Condition</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#autocompletesearchobjects" class="tsd-kind-icon">autocomplete<wbr>Search<wbr>Objects</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#ensureexists" class="tsd-kind-icon">ensure<wbr>Exists</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#ensurenonemptystring" class="tsd-kind-icon">ensure<wbr>Non<wbr>Empty<wbr>String</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#ensureunreachable" class="tsd-kind-icon">ensure<wbr>Unreachable</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#getqueryparams" class="tsd-kind-icon">get<wbr>Query<wbr>Params</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#isarraytype" class="tsd-kind-icon">is<wbr>Array<wbr>Type</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#isdynamicsynctable" class="tsd-kind-icon">is<wbr>Dynamic<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#isobjectpackformula" class="tsd-kind-icon">is<wbr>Object<wbr>Pack<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#isstringpackformula" class="tsd-kind-icon">is<wbr>String<wbr>Pack<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#issyncpackformula" class="tsd-kind-icon">is<wbr>Sync<wbr>Pack<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#isuservisibleerror" class="tsd-kind-icon">is<wbr>User<wbr>Visible<wbr>Error</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#joinurl" class="tsd-kind-icon">join<wbr>Url</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#makedynamicsynctable" class="tsd-kind-icon">make<wbr>Dynamic<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#makeemptyformula" class="tsd-kind-icon">make<wbr>Empty<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#makeformula" class="tsd-kind-icon">make<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#makemetadataformula" class="tsd-kind-icon">make<wbr>Metadata<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#makeparameter" class="tsd-kind-icon">make<wbr>Parameter</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#makesimpleautocompletemetadataformula" class="tsd-kind-icon">make<wbr>Simple<wbr>Autocomplete<wbr>Metadata<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#makesynctable" class="tsd-kind-icon">make<wbr>Sync<wbr>Table</a>
					</li>
					<li class=" tsd-kind-function tsd-has-type-parameter root">
						<a href="modules.html#maketranslateobjectformula" class="tsd-kind-icon">make<wbr>Translate<wbr>Object<wbr>Formula</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#makeuservisibleerror" class="tsd-kind-icon">make<wbr>User<wbr>Visible<wbr>Error</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#newpack" class="tsd-kind-icon">new<wbr>Pack</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#simpleautocomplete" class="tsd-kind-icon">simple<wbr>Autocomplete</a>
					</li>
					<li class=" tsd-kind-function root">
						<a href="modules.html#withqueryparams" class="tsd-kind-icon">with<wbr>Query<wbr>Params</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>