'use strict';
var br=Object.create,W=Object.defineProperty,Sr=Object.getPrototypeOf,Pr=Object.prototype.hasOwnProperty,vr=Object.getOwnPropertyNames,Or=Object.getOwnPropertyDescriptor;var Se=e=>W(e,"__esModule",{value:!0});var F=(e,r)=>()=>(r||(r={exports:{}},e(r.exports,r)),r.exports),Fr=(e,r)=>{for(var t in r)W(e,t,{get:r[t],enumerable:!0})},jr=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of vr(r))!Pr.call(e,a)&&a!=="default"&&W(e,a,{get:()=>r[a],enumerable:!(t=Or(r,a))||t.enumerable});return e},L=e=>jr(Se(W(e!=null?br(Sr(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Fe=F((Kt,Oe)=>{var wr=e=>e[0].toLocaleUpperCase()+e.slice(1);Oe.exports=e=>{if(e==null||typeof e.toString!="function")return"";let r=e.toString().trim();if(r==="")return"";if(r.length===1)return r.toLocaleUpperCase();let t=r.match(/[a-zA-Z0-9]+/g);return t?t.map(a=>wr(a)).join(""):r}});var Ae=F((Yt,Z)=>{var Dr=function(){"use strict";function e(p,c){return c!=null&&p instanceof c}var r;try{r=Map}catch(p){r=function(){}}var t;try{t=Set}catch(p){t=function(){}}var a;try{a=Promise}catch(p){a=function(){}}function n(p,c,d,T,g){typeof c=="object"&&(d=c.depth,T=c.prototype,g=c.includeNonEnumerable,c=c.circular);var h=[],$=[],_=typeof Buffer!="undefined";typeof c=="undefined"&&(c=!0),typeof d=="undefined"&&(d=Infinity);function P(l,b){if(l===null)return null;if(b===0)return l;var y,j;if(typeof l!="object")return l;if(e(l,r))y=new r;else if(e(l,t))y=new t;else if(e(l,a))y=new a(function(H,I){l.then(function(K){H(P(K,b-1))},function(K){I(P(K,b-1))})});else if(n.__isArray(l))y=[];else if(n.__isRegExp(l))y=new RegExp(l.source,u(l)),l.lastIndex&&(y.lastIndex=l.lastIndex);else if(n.__isDate(l))y=new Date(l.getTime());else{if(_&&Buffer.isBuffer(l))return Buffer.allocUnsafe?y=Buffer.allocUnsafe(l.length):y=new Buffer(l.length),l.copy(y),y;e(l,Error)?y=Object.create(l):typeof T=="undefined"?(j=Object.getPrototypeOf(l),y=Object.create(j)):(y=Object.create(T),j=T)}if(c){var k=h.indexOf(l);if(k!=-1)return $[k];h.push(l),$.push(y)}e(l,r)&&l.forEach(function(H,I){var K=P(I,b-1),Tr=P(H,b-1);y.set(K,Tr)}),e(l,t)&&l.forEach(function(H){var I=P(H,b-1);y.add(I)});for(var O in l){var ee;j&&(ee=Object.getOwnPropertyDescriptor(j,O)),!(ee&&ee.set==null)&&(y[O]=P(l[O],b-1))}if(Object.getOwnPropertySymbols)for(var Te=Object.getOwnPropertySymbols(l),O=0;O<Te.length;O++){var Q=Te[O],V=Object.getOwnPropertyDescriptor(l,Q);V&&!V.enumerable&&!g||(y[Q]=P(l[Q],b-1),V.enumerable||Object.defineProperty(y,Q,{enumerable:!1}))}if(g)for(var be=Object.getOwnPropertyNames(l),O=0;O<be.length;O++){var J=be[O],V=Object.getOwnPropertyDescriptor(l,J);V&&V.enumerable||(y[J]=P(l[J],b-1),Object.defineProperty(y,J,{enumerable:!1}))}return y}return P(p,d)}n.clonePrototype=function(c){if(c===null)return null;var d=function(){};return d.prototype=c,new d};function o(p){return Object.prototype.toString.call(p)}n.__objToStr=o;function i(p){return typeof p=="object"&&o(p)==="[object Date]"}n.__isDate=i;function s(p){return typeof p=="object"&&o(p)==="[object Array]"}n.__isArray=s;function m(p){return typeof p=="object"&&o(p)==="[object RegExp]"}n.__isRegExp=m;function u(p){var c="";return p.global&&(c+="g"),p.ignoreCase&&(c+="i"),p.multiline&&(c+="m"),c}return n.__getRegExpFlags=u,n}();typeof Z=="object"&&Z.exports&&(Z.exports=Dr)});var Ce=F((Xt,ke)=>{var Ar=/\{([0-9a-zA-Z_]+)\}/g;ke.exports=kr;function kr(e){var r;if(arguments.length===2&&typeof arguments[1]=="object")r=arguments[1];else{r=new Array(arguments.length-1);for(var t=1;t<arguments.length;++t)r[t-1]=arguments[t]}return(!r||!r.hasOwnProperty)&&(r={}),e.replace(Ar,function(n,o,i){var s;return e[i-1]==="{"&&e[i+n.length]==="}"?o:(s=r.hasOwnProperty(o)?r[o]:null,s??"")})}});var Re=F((ea,_e)=>{var ae=Ce(),Cr=/["'\\\n\r\u2028\u2029]/g,Me=/\{[0-9a-zA-Z]+\}/g,_r=`    var args
    var result
    if (arguments.length === 1 && typeof arguments[0] === "object") {
        args = arguments[0]
    } else {
        args = arguments    }

    if (!args || !("hasOwnProperty" in args)) {
       args = {}
    }

    return {0}`,Mr='"{0}"',Nr=`(result = args.hasOwnProperty("{0}") ? args["{0}"] : null, 
        (result === null || result === undefined) ? "" : result)`;_e.exports=Rr;function Rr(e,r){for(var t=e.match(Me)||[],a=e.split(Me),n=[],o=0;o<a.length;o++){var i=a[o],s=t[o],m=i.charAt(i.length-1),u=(a[o+1]||"").charAt(0);s&&(s=s.substring(1,s.length-1)),m==="{"&&u==="}"?n.push(i+s):(n.push(i),s&&n.push({name:s}))}for(var p=[""],c=0;c<n.length;c++){var d=n[c];if(String(d)===d){var T=p[p.length-1];String(T)===T?p[p.length-1]=T+d:p.push(d)}else p.push(d)}if(n=p,r){for(var g=0;g<n.length;g++){var h=n[g];String(h)===h?n[g]=ae(Mr,Ne(h)):n[g]=ae(Nr,Ne(h.name))}var $=n.join(` +
    `),_=ae(_r,$);return new Function(_)}return function(){var l;arguments.length===1&&typeof arguments[0]=="object"?l=arguments[0]:l=arguments,(!l||!("hasOwnProperty"in l))&&(l={});for(var b=[],y=0;y<n.length;y++)if(y%2==0)b.push(n[y]);else{var j=n[y].name,k=l.hasOwnProperty(j)?l[j]:null;(k!==null||k!==void 0)&&b.push(k)}return b.join("")}}function Ne(e){return e=""+e,e.replace(Cr,$r)}function $r(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}});var Y=F((ra,$e)=>{"use strict";var Vr=String.prototype.replace,Lr=/%20/g,ne={RFC1738:"RFC1738",RFC3986:"RFC3986"};$e.exports={default:ne.RFC3986,formatters:{RFC1738:function(e){return Vr.call(e,Lr,"+")},RFC3986:function(e){return String(e)}},RFC1738:ne.RFC1738,RFC3986:ne.RFC3986}});var ie=F((ta,Ve)=>{"use strict";var qr=Y(),oe=Object.prototype.hasOwnProperty,M=Array.isArray,E=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),Hr=function(r){for(;r.length>1;){var t=r.pop(),a=t.obj[t.prop];if(M(a)){for(var n=[],o=0;o<a.length;++o)typeof a[o]!="undefined"&&n.push(a[o]);t.obj[t.prop]=n}}},Le=function(r,t){for(var a=t&&t.plainObjects?Object.create(null):{},n=0;n<r.length;++n)typeof r[n]!="undefined"&&(a[n]=r[n]);return a},Ir=function e(r,t,a){if(!t)return r;if(typeof t!="object"){if(M(r))r.push(t);else if(r&&typeof r=="object")(a&&(a.plainObjects||a.allowPrototypes)||!oe.call(Object.prototype,t))&&(r[t]=!0);else return[r,t];return r}if(!r||typeof r!="object")return[r].concat(t);var n=r;return M(r)&&!M(t)&&(n=Le(r,a)),M(r)&&M(t)?(t.forEach(function(o,i){if(oe.call(r,i)){var s=r[i];s&&typeof s=="object"&&o&&typeof o=="object"?r[i]=e(s,o,a):r.push(o)}else r[i]=o}),r):Object.keys(t).reduce(function(o,i){var s=t[i];return oe.call(o,i)?o[i]=e(o[i],s,a):o[i]=s,o},n)},Kr=function(r,t){return Object.keys(t).reduce(function(a,n){return a[n]=t[n],a},r)},Br=function(e,r,t){var a=e.replace(/\+/g," ");if(t==="iso-8859-1")return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch(n){return a}},Ur=function(r,t,a,n,o){if(r.length===0)return r;var i=r;if(typeof r=="symbol"?i=Symbol.prototype.toString.call(r):typeof r!="string"&&(i=String(r)),a==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var s="",m=0;m<i.length;++m){var u=i.charCodeAt(m);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===qr.RFC1738&&(u===40||u===41)){s+=i.charAt(m);continue}if(u<128){s=s+E[u];continue}if(u<2048){s=s+(E[192|u>>6]+E[128|u&63]);continue}if(u<55296||u>=57344){s=s+(E[224|u>>12]+E[128|u>>6&63]+E[128|u&63]);continue}m+=1,u=65536+((u&1023)<<10|i.charCodeAt(m)&1023),s+=E[240|u>>18]+E[128|u>>12&63]+E[128|u>>6&63]+E[128|u&63]}return s},zr=function(r){for(var t=[{obj:{o:r},prop:"o"}],a=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],s=Object.keys(i),m=0;m<s.length;++m){var u=s[m],p=i[u];typeof p=="object"&&p!==null&&a.indexOf(p)===-1&&(t.push({obj:i,prop:u}),a.push(p))}return Hr(t),r},Gr=function(r){return Object.prototype.toString.call(r)==="[object RegExp]"},Qr=function(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))},Jr=function(r,t){return[].concat(r,t)},Wr=function(r,t){if(M(r)){for(var a=[],n=0;n<r.length;n+=1)a.push(t(r[n]));return a}return t(r)};Ve.exports={arrayToObject:Le,assign:Kr,combine:Jr,compact:zr,decode:Br,encode:Ur,isBuffer:Qr,isRegExp:Gr,maybeMap:Wr,merge:Ir}});var Be=F((aa,qe)=>{"use strict";var se=ie(),U=Y(),Zr=Object.prototype.hasOwnProperty,He={brackets:function(r){return r+"[]"},comma:"comma",indices:function(r,t){return r+"["+t+"]"},repeat:function(r){return r}},N=Array.isArray,Yr=Array.prototype.push,Ie=function(e,r){Yr.apply(e,N(r)?r:[r])},Xr=Date.prototype.toISOString,Ke=U.default,v={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:se.encode,encodeValuesOnly:!1,format:Ke,formatter:U.formatters[Ke],indices:!1,serializeDate:function(r){return Xr.call(r)},skipNulls:!1,strictNullHandling:!1},et=function(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"},rt=function e(r,t,a,n,o,i,s,m,u,p,c,d,T,g){var h=r;if(typeof s=="function"?h=s(t,h):h instanceof Date?h=p(h):a==="comma"&&N(h)&&(h=se.maybeMap(h,function(O){return O instanceof Date?p(O):O})),h===null){if(n)return i&&!T?i(t,v.encoder,g,"key",c):t;h=""}if(et(h)||se.isBuffer(h)){if(i){var $=T?t:i(t,v.encoder,g,"key",c);return[d($)+"="+d(i(h,v.encoder,g,"value",c))]}return[d(t)+"="+d(String(h))]}var _=[];if(typeof h=="undefined")return _;var P;if(a==="comma"&&N(h))P=[{value:h.length>0?h.join(",")||null:void 0}];else if(N(s))P=s;else{var l=Object.keys(h);P=m?l.sort(m):l}for(var b=0;b<P.length;++b){var y=P[b],j=typeof y=="object"&&y.value!==void 0?y.value:h[y];if(!(o&&j===null)){var k=N(h)?typeof a=="function"?a(t,y):t:t+(u?"."+y:"["+y+"]");Ie(_,e(j,k,a,n,o,i,s,m,u,p,c,d,T,g))}}return _},tt=function(r){if(!r)return v;if(r.encoder!==null&&r.encoder!==void 0&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=r.charset||v.charset;if(typeof r.charset!="undefined"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=U.default;if(typeof r.format!="undefined"){if(!Zr.call(U.formatters,r.format))throw new TypeError("Unknown format option provided.");a=r.format}var n=U.formatters[a],o=v.filter;return(typeof r.filter=="function"||N(r.filter))&&(o=r.filter),{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:v.addQueryPrefix,allowDots:typeof r.allowDots=="undefined"?v.allowDots:!!r.allowDots,charset:t,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:v.charsetSentinel,delimiter:typeof r.delimiter=="undefined"?v.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:v.encode,encoder:typeof r.encoder=="function"?r.encoder:v.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:v.encodeValuesOnly,filter:o,format:a,formatter:n,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:v.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:v.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:v.strictNullHandling}};qe.exports=function(e,r){var t=e,a=tt(r),n,o;typeof a.filter=="function"?(o=a.filter,t=o("",t)):N(a.filter)&&(o=a.filter,n=o);var i=[];if(typeof t!="object"||t===null)return"";var s;r&&r.arrayFormat in He?s=r.arrayFormat:r&&"indices"in r?s=r.indices?"indices":"repeat":s="indices";var m=He[s];n||(n=Object.keys(t)),a.sort&&n.sort(a.sort);for(var u=0;u<n.length;++u){var p=n[u];a.skipNulls&&t[p]===null||Ie(i,rt(t[p],p,m,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset))}var c=i.join(a.delimiter),d=a.addQueryPrefix===!0?"?":"";return a.charsetSentinel&&(a.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}});var Ge=F((na,Ue)=>{"use strict";var q=ie(),ce=Object.prototype.hasOwnProperty,at=Array.isArray,S={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:q.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},nt=function(e){return e.replace(/&#(\d+);/g,function(r,t){return String.fromCharCode(parseInt(t,10))})},ze=function(e,r){return e&&typeof e=="string"&&r.comma&&e.indexOf(",")>-1?e.split(","):e},ot="utf8=%26%2310003%3B",it="utf8=%E2%9C%93",st=function(r,t){var a={},n=t.ignoreQueryPrefix?r.replace(/^\?/,""):r,o=t.parameterLimit===Infinity?void 0:t.parameterLimit,i=n.split(t.delimiter,o),s=-1,m,u=t.charset;if(t.charsetSentinel)for(m=0;m<i.length;++m)i[m].indexOf("utf8=")===0&&(i[m]===it?u="utf-8":i[m]===ot&&(u="iso-8859-1"),s=m,m=i.length);for(m=0;m<i.length;++m)if(m!==s){var p=i[m],c=p.indexOf("]="),d=c===-1?p.indexOf("="):c+1,T,g;d===-1?(T=t.decoder(p,S.decoder,u,"key"),g=t.strictNullHandling?null:""):(T=t.decoder(p.slice(0,d),S.decoder,u,"key"),g=q.maybeMap(ze(p.slice(d+1),t),function(h){return t.decoder(h,S.decoder,u,"value")})),g&&t.interpretNumericEntities&&u==="iso-8859-1"&&(g=nt(g)),p.indexOf("[]=")>-1&&(g=at(g)?[g]:g),ce.call(a,T)?a[T]=q.combine(a[T],g):a[T]=g}return a},ct=function(e,r,t,a){for(var n=a?r:ze(r,t),o=e.length-1;o>=0;--o){var i,s=e[o];if(s==="[]"&&t.parseArrays)i=[].concat(n);else{i=t.plainObjects?Object.create(null):{};var m=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,u=parseInt(m,10);!t.parseArrays&&m===""?i={0:n}:!isNaN(u)&&s!==m&&String(u)===m&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(i=[],i[u]=n):i[m]=n}n=i}return n},mt=function(r,t,a,n){if(!!r){var o=a.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,i=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,m=a.depth>0&&i.exec(o),u=m?o.slice(0,m.index):o,p=[];if(u){if(!a.plainObjects&&ce.call(Object.prototype,u)&&!a.allowPrototypes)return;p.push(u)}for(var c=0;a.depth>0&&(m=s.exec(o))!==null&&c<a.depth;){if(c+=1,!a.plainObjects&&ce.call(Object.prototype,m[1].slice(1,-1))&&!a.allowPrototypes)return;p.push(m[1])}return m&&p.push("["+o.slice(m.index)+"]"),ct(p,t,a,n)}},ut=function(r){if(!r)return S;if(r.decoder!==null&&r.decoder!==void 0&&typeof r.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof r.charset!="undefined"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof r.charset=="undefined"?S.charset:r.charset;return{allowDots:typeof r.allowDots=="undefined"?S.allowDots:!!r.allowDots,allowPrototypes:typeof r.allowPrototypes=="boolean"?r.allowPrototypes:S.allowPrototypes,arrayLimit:typeof r.arrayLimit=="number"?r.arrayLimit:S.arrayLimit,charset:t,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:S.charsetSentinel,comma:typeof r.comma=="boolean"?r.comma:S.comma,decoder:typeof r.decoder=="function"?r.decoder:S.decoder,delimiter:typeof r.delimiter=="string"||q.isRegExp(r.delimiter)?r.delimiter:S.delimiter,depth:typeof r.depth=="number"||r.depth===!1?+r.depth:S.depth,ignoreQueryPrefix:r.ignoreQueryPrefix===!0,interpretNumericEntities:typeof r.interpretNumericEntities=="boolean"?r.interpretNumericEntities:S.interpretNumericEntities,parameterLimit:typeof r.parameterLimit=="number"?r.parameterLimit:S.parameterLimit,parseArrays:r.parseArrays!==!1,plainObjects:typeof r.plainObjects=="boolean"?r.plainObjects:S.plainObjects,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:S.strictNullHandling}};Ue.exports=function(e,r){var t=ut(r);if(e===""||e===null||typeof e=="undefined")return t.plainObjects?Object.create(null):{};for(var a=typeof e=="string"?st(e,t):e,n=t.plainObjects?Object.create(null):{},o=Object.keys(a),i=0;i<o.length;++i){var s=o[i],m=mt(s,a[s],t,typeof e=="string");n=q.merge(n,m,t)}return q.compact(n)}});var Je=F((oa,Qe)=>{"use strict";var pt=Be(),ft=Ge(),lt=Y();Qe.exports={formats:lt,parse:ft,stringify:pt}});var Ze=F((ia,We)=>{"use strict";We.exports=function(r,t){if(t=t.split(":")[0],r=+r,!r)return!1;switch(t){case"http":case"ws":return r!==80;case"https":case"wss":return r!==443;case"ftp":return r!==21;case"gopher":return r!==70;case"file":return!1}return r!==0}});var Xe=F(me=>{"use strict";var yt=Object.prototype.hasOwnProperty,dt;function Ye(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(r){return null}}function ht(e){for(var r=/([^=?&]+)=?([^&]*)/g,t={},a;a=r.exec(e);){var n=Ye(a[1]),o=Ye(a[2]);n===null||o===null||n in t||(t[n]=o)}return t}function gt(e,r){r=r||"";var t=[],a,n;typeof r!="string"&&(r="?");for(n in e)if(yt.call(e,n)){if(a=e[n],!a&&(a===null||a===dt||isNaN(a))&&(a=""),n=encodeURIComponent(n),a=encodeURIComponent(a),n===null||a===null)continue;t.push(n+"="+a)}return t.length?r+t.join("&"):""}me.stringify=gt;me.parse=ht});var fe=F((ca,er)=>{"use strict";var rr=Ze(),X=Xe(),xt=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,Tt=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,bt="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",St=new RegExp("^"+bt+"+");function ue(e){return(e||"").toString().replace(St,"")}var pe=[["#","hash"],["?","query"],function(r){return r.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],tr={hash:1,query:1};function ar(e){var r;typeof window!="undefined"?r=window:typeof global!="undefined"?r=global:typeof self!="undefined"?r=self:r={};var t=r.location||{};e=e||t;var a={},n=typeof e,o;if(e.protocol==="blob:")a=new D(unescape(e.pathname),{});else if(n==="string"){a=new D(e,{});for(o in tr)delete a[o]}else if(n==="object"){for(o in e)o in tr||(a[o]=e[o]);a.slashes===void 0&&(a.slashes=xt.test(e.href))}return a}function nr(e){e=ue(e);var r=Tt.exec(e),t=r[1]?r[1].toLowerCase():"",a=!!(r[2]&&r[2].length>=2),n=r[2]&&r[2].length===1?"/"+r[3]:r[3];return{protocol:t,slashes:a,rest:n}}function Pt(e,r){if(e==="")return r;for(var t=(r||"/").split("/").slice(0,-1).concat(e.split("/")),a=t.length,n=t[a-1],o=!1,i=0;a--;)t[a]==="."?t.splice(a,1):t[a]===".."?(t.splice(a,1),i++):i&&(a===0&&(o=!0),t.splice(a,1),i--);return o&&t.unshift(""),(n==="."||n==="..")&&t.push(""),t.join("/")}function D(e,r,t){if(e=ue(e),!(this instanceof D))return new D(e,r,t);var a,n,o,i,s,m,u=pe.slice(),p=typeof r,c=this,d=0;for(p!=="object"&&p!=="string"&&(t=r,r=null),t&&typeof t!="function"&&(t=X.parse),r=ar(r),n=nr(e||""),a=!n.protocol&&!n.slashes,c.slashes=n.slashes||a&&r.slashes,c.protocol=n.protocol||r.protocol||"",e=n.rest,n.slashes||(u[3]=[/(.*)/,"pathname"]);d<u.length;d++){if(i=u[d],typeof i=="function"){e=i(e);continue}o=i[0],m=i[1],o!==o?c[m]=e:typeof o=="string"?~(s=e.indexOf(o))&&(typeof i[2]=="number"?(c[m]=e.slice(0,s),e=e.slice(s+i[2])):(c[m]=e.slice(s),e=e.slice(0,s))):(s=o.exec(e))&&(c[m]=s[1],e=e.slice(0,s.index)),c[m]=c[m]||a&&i[3]&&r[m]||"",i[4]&&(c[m]=c[m].toLowerCase())}t&&(c.query=t(c.query)),a&&r.slashes&&c.pathname.charAt(0)!=="/"&&(c.pathname!==""||r.pathname!=="")&&(c.pathname=Pt(c.pathname,r.pathname)),c.pathname.charAt(0)!=="/"&&c.hostname&&(c.pathname="/"+c.pathname),rr(c.port,c.protocol)||(c.host=c.hostname,c.port=""),c.username=c.password="",c.auth&&(i=c.auth.split(":"),c.username=i[0]||"",c.password=i[1]||""),c.origin=c.protocol&&c.host&&c.protocol!=="file:"?c.protocol+"//"+c.host:"null",c.href=c.toString()}function vt(e,r,t){var a=this;switch(e){case"query":typeof r=="string"&&r.length&&(r=(t||X.parse)(r)),a[e]=r;break;case"port":a[e]=r,rr(r,a.protocol)?r&&(a.host=a.hostname+":"+r):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=r,a.port&&(r+=":"+a.port),a.host=r;break;case"host":a[e]=r,/:\d+$/.test(r)?(r=r.split(":"),a.port=r.pop(),a.hostname=r.join(":")):(a.hostname=r,a.port="");break;case"protocol":a.protocol=r.toLowerCase(),a.slashes=!t;break;case"pathname":case"hash":if(r){var n=e==="pathname"?"/":"#";a[e]=r.charAt(0)!==n?n+r:r}else a[e]=r;break;default:a[e]=r}for(var o=0;o<pe.length;o++){var i=pe[o];i[4]&&(a[i[1]]=a[i[1]].toLowerCase())}return a.origin=a.protocol&&a.host&&a.protocol!=="file:"?a.protocol+"//"+a.host:"null",a.href=a.toString(),a}function Ot(e){(!e||typeof e!="function")&&(e=X.stringify);var r,t=this,a=t.protocol;a&&a.charAt(a.length-1)!==":"&&(a+=":");var n=a+(t.slashes?"//":"");return t.username&&(n+=t.username,t.password&&(n+=":"+t.password),n+="@"),n+=t.host+t.pathname,r=typeof t.query=="object"?e(t.query):t.query,r&&(n+=r.charAt(0)!=="?"?"?"+r:r),t.hash&&(n+=t.hash),n}D.prototype={set:vt,toString:Ot};D.extractProtocol=nr;D.location=ar;D.trimLeft=ue;D.qs=X;er.exports=D});Se(exports);Fr(exports,{executeFormulaOrSyncWithRawParams:()=>qt,executeSyncFormulaWithoutValidation:()=>yr,findFormula:()=>gr,findSyncFormula:()=>xr,tryFindFormula:()=>dr,tryFindSyncFormula:()=>hr,wrapError:()=>xe});var x;(function(e){e[e.string=0]="string",e[e.number=1]="number",e[e.object=2]="object",e[e.boolean=3]="boolean",e[e.date=4]="date",e[e.html=5]="html",e[e.image=6]="image"})(x||(x={}));function Pe(e){return e&&e.type==="array"&&typeof e.items=="number"}var ve;(function(e){e.Yesterday="yesterday",e.Last7Days="last_7_days",e.Last30Days="last_30_days",e.LastWeek="last_week",e.LastMonth="last_month",e.Last3Months="last_3_months",e.Last6Months="last_6_months",e.LastYear="last_year",e.Today="today",e.ThisWeek="this_week",e.ThisWeekStart="this_week_start",e.ThisMonth="this_month",e.ThisMonthStart="this_month_start",e.ThisYearStart="this_year_start",e.YearToDate="year_to_date",e.ThisYear="this_year",e.Tomorrow="tomorrow",e.Next7Days="next_7_days",e.Next30Days="next_30_days",e.NextWeek="next_week",e.NextMonth="next_month",e.Next3Months="next_3_months",e.Next6Months="next_6_months",e.NextYear="next_year",e.Everything="everything"})(ve||(ve={}));var Er=L(Fe()),f;(function(e){e.Boolean="boolean",e.Number="number",e.String="string",e.Array="array",e.Object="object",e.Date="date",e.Time="time",e.DateTime="datetime",e.Duration="duration",e.Person="person",e.Percent="percent",e.Currency="currency",e.Image="image",e.Url="url",e.Markdown="markdown",e.Html="html",e.Embed="embed",e.Reference="reference",e.ImageAttachment="imageAttachment",e.Attachment="attachment",e.Slider="slider",e.Scale="scale"})(f||(f={}));var Jt=[f.Attachment,f.Date,f.Time,f.DateTime,f.Duration,f.Embed,f.Html,f.Image,f.ImageAttachment,f.Markdown,f.Url],Wt=[f.Date,f.Time,f.DateTime,f.Percent,f.Currency,f.Slider,f.Scale],Zt=[f.Person,f.Reference],je;(function(e){e.Currency="currency",e.Accounting="accounting",e.Financial="financial"})(je||(je={}));var we;(function(e){e.Days="days",e.Hours="hours",e.Minutes="minutes",e.Seconds="seconds"})(we||(we={}));var Ee;(function(e){e[e.Text=1]="Text",e[e.Link=2]="Link",e[e.Image=3]="Image"})(Ee||(Ee={}));function re(e){return Boolean(e&&e.type===f.Object)}function te(e){return Boolean(e&&e.type===f.Array)}var De;(function(e){e.Identity="I"})(De||(De={}));var wt=L(Ae()),Et=L(Re());var Ft=L(Je()),jt=L(fe());var le=class extends Error{constructor(r,t){super(r);this.isUserVisible=!0;this.internalError=t}};function or(e){return e.resultType===x.object}function A(e,r){throw new Error(r||`Unreachable code hit with value ${String(e)}`)}function B(e,r){if(typeof e=="undefined"||e===null)throw new(Dt(r))(r||`Expected value for ${String(e)}`);return e}function Dt(e){return e?le:Error}function z(e){return!ye(e)}function ye(e){return typeof e=="undefined"||e===null}function ir(e){return JSON.parse(JSON.stringify(e))}function de(e,r){let{parameters:t,varargParameters:a}=e,n=[],o=0;for(let i=0;i<r.length;i++){let s=t[i];if(s)n.push(sr(s,r[i]));else if(a){let m=a[o];n.push(sr(m,r[i])),o=(o+1)%a.length}else n.push(r[i])}return n}function sr(e,r){if(!z(r))return r;if(Pe(e.type)){let t=r;return(t.length?t.split(","):[]).map(n=>cr(e.type.items,n.trim()))}return cr(e.type,r)}function cr(e,r){switch(e){case x.boolean:return(r||"").toLowerCase()==="true";case x.date:return new Date(r);case x.number:return Number(r);case x.object:return JSON.parse(r);case x.html:case x.image:case x.string:return r;default:return A(e)}}var G=class extends Error{},R=class{constructor(r){this.fieldContexts=r?ir(r):[]}extendForProperty(r){let t={propertyKey:r,arrayIndices:[]};return new R([...this.fieldContexts,t])}extendForIndex(r){let t=new R(this.fieldContexts);return t.fieldContexts[t.fieldContexts.length-1].arrayIndices.push(r),t}generateFieldPath(){return this.fieldContexts.map(t=>this.generateFieldPathFromValidationContext(t)).join(".")}generateFieldPathFromValidationContext(r){let{propertyKey:t,arrayIndices:a}=r;return`${t}${a.map(n=>`[${n}]`)}`}},C=class extends Error{constructor(r,t){super(r);this.errors=t}static fromErrors(r,t){let a=t.map(o=>o.message).join(`
`),n=`The following errors were found when validating the result of the formula "${r}":
${a}`;return new C(n,t)}};var At=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function mr(e){return At.test(e)}var ur=L(fe());function he(e,r){let{parameters:t,varargParameters:a}=e,n=t.filter(i=>!i.optional).length;if(r.length<n)throw new G(`Expected at least ${n} parameter but only ${r.length} were provided.`);if(r.length>t.length&&!a)throw new G(`Formula only accepts ${t.length} parameters but ${r.length} were provided.`);let o=[];for(let i=0;i<t.length;i++){let s=r[i],m=t[i];!m.optional&&!z(s)&&o.push({message:`Param ${i} "${m.name}" is required but a value was not provided.`})}if(o.length){let i=o.map(s=>s.message);throw new G(`The following parameter errors were found:
${i.join(`
`)}`)}}function ge(e,r){let t=kt(e.resultType,r);if(t)throw C.fromErrors(e.name,[t]);or(e)&&Ct(e,r)}function kt(e,r){if(!z(r))return{message:`Expected a ${e} result but got ${r}.`};let t=typeof r;switch(e){case x.boolean:return w(t==="boolean","boolean",r);case x.date:return w(r instanceof Date,"date",r);case x.html:return w(t==="string","html",r);case x.image:return w(t==="string","image",r);case x.number:return w(t==="number","number",r);case x.object:return w(t==="object","object",r);case x.string:return w(t==="string","string",r);default:return A(e)}}function _t(e,r,t){let a=typeof t=="string"?`"${t}"`:t,n=e.generateFieldPath();return{message:`Expected a ${r.type} property for ${n} but got ${a}.`}}function lr(e,r,t){let a=[_t(t,e,r)];switch(e.type){case f.Boolean:return w(typeof r=="boolean","boolean",r)?a:[];case f.Number:{if(w(typeof r=="number","number",r))return a;if(!("codaType"in e))return[];switch(e.codaType){case f.Slider:let o=Rt(r,e);return o?[o]:[];case f.Scale:let i=$t(r,e);return i?[i]:[];case f.Date:case f.DateTime:case f.Time:case f.Percent:case f.Currency:case void 0:return[];default:return A(e)}}case f.String:{if(w(typeof r=="string","string",r))return a;switch(e.codaType){case f.Attachment:case f.Embed:case f.Image:case f.ImageAttachment:case f.Url:let o=Nt(r,e);return o?[o]:[];case f.Date:case f.DateTime:let i=Mt(r,e);return i?[i]:[];case f.Duration:case f.Time:return[];case f.Html:case f.Markdown:case void 0:return[];default:A(e)}}case f.Array:return fr(r,e,t);case f.Object:{if(w(typeof r=="object","object",r))return a;switch(e.codaType){case f.Person:let o=Vt(r,e);return o?[o]:[];case f.Reference:case void 0:return pr(r,e,t);default:A(e)}}default:return A(e)}}function Mt(e,r){let t=e;if(isNaN(Date.parse(t)))return{message:`Failed to parse ${t} as a ${r.codaType}.`}}function Nt(e,r){let t={message:`Property with codaType "${r.codaType}" must be a valid HTTP(S) url, but got "${e}".`};try{let a=(0,ur.default)(e);if(!(a.protocol==="http:"||a.protocol==="https:"))return t}catch(a){return t}}function Rt(e,r){let t=e,{minimum:a,maximum:n}=r;if(t<(a??0))return{message:`Slider value ${e} is below the specified minimum value of ${a??0}.`};if(n&&t>n)return{message:`Slider value ${e} is greater than the specified maximum value of ${n}.`}}function $t(e,r){let{maximum:t}=r,a=e;if(!Number.isInteger(e))return{message:`Scale value ${e} must be an integer.`};if(a<0)return{message:`Scale value ${e} cannot be below 0.`};if(a>t)return{message:`Scale value ${e} is greater than the specified maximum value of ${t}.`}}function Vt(e,r){let{id:t}=r,a=B(t),n=Lt(e,a);if(n)return n;if(!mr(e[a]))return{message:`The id field for the person result must be an email string, but got "${e[a]}".`}}function Lt(e,r){if(!(r in e)||!e[r])return{message:`Schema declares required property "${r}" but this attribute is missing or empty.`}}function w(e,r,t){if(!e){let a=typeof t=="string"?`"${t}"`:t;return{message:`Expected a ${r} result but got ${a}.`}}}function Ct(e,r){let{schema:t}=e;if(!t)return;let a=new R;if(te(t)){let o=fr(r,t,new R().extendForProperty(e.name));if(o.length)throw C.fromErrors(e.name,o);return}if(!re(t)){let o={message:`Expected an object schema, but found ${JSON.stringify(t)}.`};throw C.fromErrors(e.name,[o])}let n=pr(r,t,a);if(n.length)throw C.fromErrors(e.name,n)}function pr(e,r,t){let a=[];for(let[n,o]of Object.entries(r.properties)){let i=e[n];if(o.required&&ye(i)&&a.push({message:`Schema declares required property "${n}" but this attribute is missing or empty.`}),i){let s=lr(o,i,t.extendForProperty(n));a.push(...s)}}return r.id&&r.id in e&&!e[r.id]&&a.push({message:`Schema declares "${r.id}" as an id property but an empty value was found in result.`}),a}function fr(e,r,t){if(!Array.isArray(e))return[{message:`Expected an ${r.type} result but got ${e}.`}];let a=[],n=r.items;for(let o=0;o<e.length;o++){let i=e[o],s=lr(n,i,t.extendForIndex(o));a.push(...s)}return a}async function yr(e,r,t,a=3){let n=[],o=1;do{if(o>a)throw new Error(`Sync is still running after ${a} iterations, this is likely due to an infinite loop. If more iterations are needed, use the maxIterations option.`);let i;try{i=await e.execute(r,t)}catch(s){throw xe(s)}n.push(...i.result),t.sync.continuation=i.continuation,o++}while(t.sync.continuation);return n}async function qt(e,r,t,a){try{let n=dr(e,r);if(n){let i=de(n,t);he(n,i);let s=await n.execute(i,a);return ge(n,s),s}let o=hr(e,r);if(o){let i=de(o,t);he(o,i);let s=await yr(o,i,a);return ge(o,s),s}}catch(n){throw xe(n)}}function gr(e,r){let t=e.formulas;if(!t)throw new Error(`Pack definition for ${e.name} (id ${e.id}) has no formulas.`);let[a,n]=r.split("::");if(!(a&&n))throw new Error(`Formula names must be specified as FormulaNamespace::FormulaName, but got "${r}".`);let o=Array.isArray(t)?t:t[a];if(!o||!o.length)throw new Error(`Pack definition for ${e.name} (id ${e.id}) has no formulas for namespace "${a}".`);for(let i of o)if(i.name===n)return i;throw new Error(`Pack definition for ${e.name} (id ${e.id}) has no formula "${n}" in namespace "${a}".`)}function xr(e,r){if(!e.syncTables)throw new Error(`Pack definition for ${e.name} (id ${e.id}) has no sync tables.`);for(let t of e.syncTables){let a=t.getter;if(a.name===r)return a}throw new Error(`Pack definition for ${e.name} (id ${e.id}) has no sync formula "${r}" in its sync tables.`)}function dr(e,r){try{return gr(e,r)}catch(t){}}function hr(e,r){try{return xr(e,r)}catch(t){}}function xe(e){return e.name==="TypeError"&&e.message==="Cannot read property 'body' of undefined"&&(e.message+="\nThis means your formula was invoked with a mock fetcher that had no response configured.\nThis usually means you invoked your formula from the commandline with `coda execute` but forgot to add the --fetch flag to actually fetch from the remote API."),e}
/*!
 * pascalcase <https://github.com/jonschlinkert/pascalcase>
 *
 * Copyright (c) 2015-present, Jon ("Schlink") Schlinkert.
 * Licensed under the MIT License.
 */
